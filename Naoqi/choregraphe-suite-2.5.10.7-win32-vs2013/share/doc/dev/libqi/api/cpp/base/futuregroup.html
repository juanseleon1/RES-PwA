<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>qi::Future groups &mdash; Aldebaran 2.5.9.8-r3 documentation</title>
    
    <link rel="stylesheet" href="../../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../',
        VERSION:     '2.5.9.8-r3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
    <link rel="top" title="Aldebaran 2.5.9.8-r3 documentation" href="../../../../../index.html" />
    <link rel="up" title="C++ qi base API" href="index.html" />
    <link rel="next" title="qi::IOColor" href="iocolor.html" />
    <link rel="prev" title="qi::Promise, qi::Future" href="future.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115894784-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115894784-1');
</script>

<script type="text/javascript" src="https://cloud.aldebaran-robotics.com/static/js/topbar.js"></script>
<style>
div#hd::after {
  
  
  content: 'NAOqi 2.5';
  
  
  
  position: absolute;
  margin-top: -54px;
  right: -4px;
  font-size: 125%;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  transform: rotate(45deg);
  }
</style>
<script>

$(window).ready(function () {

    //Aldebaran Top bar
     var barLinks = [];
     barLinks.push({'name':'Aldebaran Site', 'url':'http://www.aldebaran-robotics.com', 'click':'', 'img':'https://cloud.aldebaran-robotics.com/static/img/aldeb.png'});
     barLinks.push({'name':'Documentation', 'url':'../../../../../index.html', 'click':"", 'img':''});
     function ShowBar(name, email, usertype) {
        var barParams = {
            'name'    : name,
            'email'   : email,
            'usertype': usertype,
            'loginfct': "FctLogin"
        }
        try { InitTopBar(barParams, barLinks); } catch (e) { console.log('Top Bar Init Failed'); }
    }
    ShowBar();

    var width_label = 0;
    $('dl.function-index dt > span').each(function () {
        $(this).css('width', 'auto');
        width_label = Math.max(width_label, $(this).width());
    }).width(width_label + 30);
    $('.sig-paren').width('auto');

    // first level navigation

    var buttonIds = [".naoqi", "pepper", "nao", "romeo"];
    for(id in buttonIds){
        $(id).removeClass("active");
    }
    //Aldebaran project
    if ($('.toctree-l1.current a').text().indexOf("Romeo ")==0){
        $(".romeo").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Pepper ")==0){
        $(".pepper").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("NAO ")==0){
        $(".nao").toggleClass('active');
    }
    else if($('.toctree-l1.current a').text().indexOf("NAOqi ")==0){
        $(".naoqi").toggleClass('active');
    }

    //qibuild project
    if ($('.toctree-l1.current a').text().indexOf("Welcome to qiBuild documentation !")==0){
        $(".beginner").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Advanced qibuild usage")==0){
        $(".advanced").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Hacking qiBuild")==0){
        $(".hacking").toggleClass('active');
    }

    // add "On this page", add cssClasses
    if($('.yui-g .section h1').length > 0){
        $('.yui-g .section h1:first').addClass("titleWrapper");
        $('.yui-g .section h1:first').after($("#on-this-page").html())
    }
    else if($('.yui-g .section h2').length > 0){
        $('.yui-g .section h2:first').addClass("titleWrapper");
        $('.yui-g .section h2:first').after($("#on-this-page").html())
    }
    //remove first element on this page
    if($("#on-this-page").length > 0){
        var doms = $(".yui-g .section :first").nextUntil("#toc-list");
        doms = doms.add($("#toc-list"));
        doms.wrapAll('<div class="iNavWrapper"></div>');
        $("#toc-list ul li a:first").remove()
        $("#toc-list ul:first").replaceWith($("#toc-list ul li").html())
    }
    $("#toc-list").hide();
    $("#otp-link").click(function(){
        $("#toc-list").slideToggle();
        if($("h2#otp-link").hasClass("change-before")){
            $("h2#otp-link").removeClass("change-before")
        }
        else{
            $("h2#otp-link").addClass("change-before")
        }
    });

    if($("a.current.reference.internal").length>0){
        var left = $("a.current.reference.internal").position().left-1;
        var width = $("a.current.reference.internal").width();
        var offset = 51;
        var sidebarWidth = 339;
        var right = sidebarWidth - (left + width + offset);
        if($("a.current.reference.internal").height() <= 15){
            $("a.current.reference.internal").css("white-space","nowrap");
            $("a.current.reference.internal").css({"backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        else{
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
            left = $("a.current.reference.internal").position().left-1;
            width = $("a.current.reference.internal").width();
            right = sidebarWidth - (left + width + offset);
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        $("a.current.reference.internal").parent().css("list-style-type","none");
    }

    //back to top
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700;
    //grab the "back to top" link
    var back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
        //back to top button
        ( $(this).scrollTop() > offset ) ? back_to_top.addClass('cd-is-visible') : back_to_top.removeClass('cd-is-visible cd-fade-out');
        if( $(this).scrollTop() > offset_opacity ) {
            back_to_top.addClass('cd-fade-out');
        }
    });

    //smooth scroll to top
    back_to_top.click(function(event){
        event.preventDefault();
        $('body,html').animate({
            scrollTop: 0 ,
        }, scroll_top_duration
        );
    });
    //add show source button

    //replace "go" with "search"
    $("#searchbox form input[type=submit]").val("Search")

    //trigger click on version triangle to jump to whats new
    $("#hd").click(function(e){if(e.pageX >= this.offsetWidth && e.pageY<120){$(".whatsnew")[0].click()}})
})

</script>


  </head>
  <body role="document">

    <div class="document">
  <div id="custom-doc" class="yui-t3">
    <div id="hd">
      
      <h1><a href="../../../../../index.html">SoftBank Robotics documentation</a>
      
      
      <span><a class="whatsnew" href="../../../../../news/index.html" >
      
          What's new in NAOqi 2.5?
      
      </a></span>
      
      </h1>
      <div id="global-nav">
        
        <a class="naoqi" title="NAOqi Developer guide" href="../../../../../index_dev_guide.html">NAOqi</a>
        <a class="pepper" title="Pepper documentation" href="../../../../../home_pepper.html">Pepper</a>
        <a class="nao" title="NAO documentation" href="../../../../../home_nao.html">NAO</a>
        <a class="romeo" title="Romeo Documentation" href="../../../../../home_romeo.html">Romeo</a>
        
        
        
        <div class="nav">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script></div>
      </div>

    </div>
    <main class="cd-container">
        <div id="bd">
          <div id="yui-main">
            <div class="yui-b">
              <div class="yui-g" id="dev-libqi-api-cpp-base-futuregroup">
                
  <div class="section" id="qi-future-groups">
<h1>qi::Future groups<a class="headerlink" href="#qi-future-groups" title="Permalink to this headline">¶</a></h1>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;qi/futuregroup.hpp&gt;</span>
</pre></div>
</div>
<p>Provides helper containers for managing <a class="reference internal" href="future.html#qi::Future" title="qi::Future"><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::Future</span></code></a> objects lifetime.</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<strong><p class="rubric">Global Classes</p>
</strong><ul>
<li><p class="first">class qi::ScopedFutureGroup</p>
<dl class="docutils">
<strong><p class="rubric">Functions (class qi::ScopedFutureGroup)</p>
</strong><ul class="simple">
<a class="reference internal" href="#qi::ScopedFutureGroup::sizeC">qi::ScopedFutureGroup::size</a><p><a class="reference internal" href="#qi::ScopedFutureGroup::~ScopedFutureGroup">qi::ScopedFutureGroup::~ScopedFutureGroup</a></p>
<p><a class="reference internal" href="#qi::ScopedFutureGroup::cancelAll">qi::ScopedFutureGroup::cancelAll</a></p>
<p><a class="reference internal" href="#qi::ScopedFutureGroup::emptyC">qi::ScopedFutureGroup::empty</a></p>
<p><a class="reference internal" href="#qi::ScopedFutureGroup::add__Future:T:">qi::ScopedFutureGroup::add</a></p>
</ul>
</dl>
</li>
</ul>
</dl>
</div>
<div class="section" id="detailed-description">
<h2>Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rationale">
<h3>Rationale<a class="headerlink" href="#rationale" title="Permalink to this headline">¶</a></h3>
<div class="highlight-cpp"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Service</span>
<span class="p">{</span>
  <span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">void</span> <span class="n">add</span><span class="p">(</span><span class="n">Data</span> <span class="n">data</span><span class="p">)</span>
  <span class="p">{</span>
     <span class="c1">// No Future is ever canceled even if Service is destroyed!</span>
     <span class="n">qi</span><span class="o">::</span><span class="n">Future</span><span class="o">&lt;</span><span class="n">PreparedData</span><span class="o">&gt;</span> <span class="n">ft</span> <span class="o">=</span> <span class="n">qi</span><span class="o">::</span><span class="n">async</span><span class="o">&lt;</span><span class="n">PreparedData</span><span class="o">&gt;</span><span class="p">(</span>
         <span class="n">boost</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Service</span><span class="o">::</span><span class="n">prepare</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">data</span><span class="p">));</span>
     <span class="n">ft</span><span class="p">.</span><span class="n">andThenR</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Service</span><span class="o">::</span><span class="n">process</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>
  <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
  <span class="n">PreparedData</span> <span class="n">prepare</span><span class="p">(</span><span class="n">Data</span> <span class="n">data</span><span class="p">);</span>
  <span class="kt">void</span> <span class="nf">process</span><span class="p">(</span><span class="n">PreparedData</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">);</span>

  <span class="c1">// ...</span>
<span class="p">};</span>

<span class="c1">// ...</span>

<span class="k">class</span> <span class="nc">SomeApplication</span>
<span class="p">{</span>
  <span class="c1">// ...</span>
<span class="k">public</span><span class="o">:</span>
  <span class="c1">// ...</span>

  <span class="kt">void</span> <span class="n">run</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Data</span><span class="o">&gt;</span> <span class="n">alldata</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">Service</span> <span class="n">service</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">alldata</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span>
    <span class="p">{</span>
      <span class="n">service</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">alldata</span><span class="p">.</span><span class="n">back</span><span class="p">());</span> <span class="c1">// launches tasks</span>
      <span class="n">service</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">mainLoop</span><span class="p">();</span> <span class="c1">// return on exit</span>
    <span class="c1">// We cannot wait for service&#39;s tasks to end.</span>
  <span class="p">}</span> <span class="c1">// service is destroyed here but its tasks have not been canceled and might still be running!</span>

<span class="p">};</span>
</pre></div>
</div>
<p>In this example, once <code class="xref cpp cpp-guess docutils literal"><span class="pre">mainLoop()</span></code> call returns, if <code class="xref cpp cpp-guess docutils literal"><span class="pre">service</span></code>&#8216;s tasks launched in <code class="xref cpp cpp-guess docutils literal"><span class="pre">add()</span></code>
didn&#8217;t finish yet, they will try to acceed to a destroyed Service object.</p>
<dl class="docutils">
<dt>To fix this bug we either:</dt>
<dd><ol class="first last arabic simple">
<li>have to wait until all tasks are finished;</li>
<li>just cancel the tasks when we stop using the Service object.</li>
</ol>
</dd>
</dl>
<p><a class="reference internal" href="#qi::ScopedFutureGroup" title="qi::ScopedFutureGroup"><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::ScopedFutureGroup</span></code></a> helps fix the second case. This is apropriate for our example
because we want to cancel tasks only when the application is destroyed.</p>
</div>
<div class="section" id="qi-scopedfuturegroup">
<h3>qi::ScopedFutureGroup<a class="headerlink" href="#qi-scopedfuturegroup" title="Permalink to this headline">¶</a></h3>
<p><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::ScopedFuture</span></code> can register cancellable futures which will be cancelled if not already
finished when the <a class="reference internal" href="#qi::ScopedFutureGroup" title="qi::ScopedFutureGroup"><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::ScopedFutureGroup</span></code></a> is destroyed.</p>
<p>We can fix the example from the Rationale section by using it this way:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;qi/futuregroup.hpp&gt;</span>

<span class="k">class</span> <span class="nc">Service</span>
<span class="p">{</span>
  <span class="c1">// ...</span>
  <span class="n">qi</span><span class="o">::</span><span class="n">ScopedFutureGroup</span> <span class="n">_runningTasks</span><span class="p">;</span> <span class="c1">// On destruction, cancel all registered futures still running.</span>

<span class="k">public</span><span class="o">:</span>
  <span class="kt">void</span> <span class="n">add</span><span class="p">(</span><span class="n">Data</span> <span class="n">data</span><span class="p">)</span>
  <span class="p">{</span>
     <span class="c1">// Here we made sure to track the futures associated with this object.</span>
     <span class="n">_runningTasks</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">qi</span><span class="o">::</span><span class="n">async</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Service</span><span class="o">::</span><span class="n">prepare</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>
                          <span class="p">.</span><span class="n">andThenR</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">bind</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Service</span><span class="o">::</span><span class="n">process</span><span class="p">,</span> <span class="k">this</span><span class="p">)));</span>
  <span class="p">}</span>

  <span class="c1">// If we want to explicitely cancel all tasks running without destroying the Service object.</span>
  <span class="kt">void</span> <span class="n">cancel</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="n">_runningTasks</span><span class="p">.</span><span class="n">cancelAll</span><span class="p">();</span>
  <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
  <span class="n">PreparedData</span> <span class="n">prepare</span><span class="p">(</span><span class="n">Data</span> <span class="n">data</span><span class="p">);</span>
  <span class="kt">void</span> <span class="nf">process</span><span class="p">(</span><span class="n">PreparedData</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">);</span>
  <span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In this case a <code class="xref cpp cpp-guess docutils literal"><span class="pre">Service</span></code> object will automatically cancel all tasks still running associated with
the futures registered using <a class="reference internal" href="#qi::ScopedFutureGroup::add__Future:T:" title="qi::ScopedFutureGroup::add"><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::ScopedFutureGroup::add</span></code></a>.</p>
<dl class="docutils">
<dt>Also:</dt>
<dd><ul class="first last simple">
<li>The registered futures are never canceled if they have been finished first,
in which case <a class="reference internal" href="#qi::ScopedFutureGroup" title="qi::ScopedFutureGroup"><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::ScopedFutureGroup</span></code></a> will automatically stop tracking the future.</li>
<li>Trying to register a <a class="reference internal" href="future.html#qi::Future" title="qi::Future"><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::Future</span></code></a> which have not been setup to be cancellable will
be ignored at runtime and a warning will be logged. Therefore it is possible
to use <a class="reference internal" href="#qi::ScopedFutureGroup" title="qi::ScopedFutureGroup"><code class="xref cpp cpp-guess docutils literal"><span class="pre">qi::ScopedFutureGroup</span></code></a> in generic template classes and algorithms if you
cannot know if the futures you get are cancellable or not.</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="qi-scopedfuturegroup-class-reference">
<h3>qi::ScopedFutureGroup Class Reference<a class="headerlink" href="#qi-scopedfuturegroup-class-reference" title="Permalink to this headline">¶</a></h3>
<div class="section" id="introduction">
<h4>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h4>
<p> <a class="reference external" href="#detailed-description"><code class="docutils literal"><span class="pre">More...</span></code></a></p>
<div class="highlight-cpp"><div class="highlight"><pre><span class="cp">#include &lt;qi/futuregroup.hpp&gt;</span>
</pre></div>
</div>
<ul>
<li><strong>Inherits: </strong><code class="docutils literal"><span class="pre">noncopyable</span></code>, <a class="reference external" href="trackable.html"><code class="docutils literal"><span class="pre">qi::Trackable&lt;</span> <span class="pre">ScopedFutureGroup</span> <span class="pre">&gt;</span></code></a></li>
</ul>
</div>
<div class="section" id="public-functions">
<h4>Public Functions<a class="headerlink" href="#public-functions" title="Permalink to this headline">¶</a></h4>
<dl class="function function-index">
<dt>
<span></span> <code class="descname"><a class="reference external" href="#qi::ScopedFutureGroup::~ScopedFutureGroup"><code class="xref cpp cpp-func docutils literal"><span class="pre">~ScopedFutureGroup</span></code></a></code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dt>
<span> </span> template&lt;class T&gt;</dt>
<dt>
<span>void</span> <code class="descname"><a class="reference external" href="#qi::ScopedFutureGroup::add__Future:T:"><code class="xref cpp cpp-func docutils literal"><span class="pre">add</span></code></a></code><span class="sig-paren">(</span>Future&lt;T&gt; <em>future</em><span class="sig-paren">)</span></dt>
<dt>
<span>void</span> <code class="descname"><a class="reference external" href="#qi::ScopedFutureGroup::cancelAll"><code class="xref cpp cpp-func docutils literal"><span class="pre">cancelAll</span></code></a></code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dt>
<span>bool</span> <code class="descname"><a class="reference external" href="#qi::ScopedFutureGroup::emptyC"><code class="xref cpp cpp-func docutils literal"><span class="pre">empty</span></code></a></code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
<dt>
<span>size_t</span> <code class="descname"><a class="reference external" href="#qi::ScopedFutureGroup::sizeC"><code class="xref cpp cpp-func docutils literal"><span class="pre">size</span></code></a></code><span class="sig-paren">(</span><span class="sig-paren">)</span> const</dt>
</dl>

</div>
<div class="section" id="types">
<h4>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h4>
<dl class="type">
<dt id="TPD_qi::ScopedFutureGroup::FutureCancelList">
<!--[TPD_qi::ScopedFutureGroup::FutureCancelList]--><span><em>typedef </em>boost::container::flat_map&lt; FutureUniqueId, boost::function&lt; void()&gt;&gt;</span> <span>FutureCancelList</span><a class="headerlink" href="#TPD_qi::ScopedFutureGroup::FutureCancelList" title="Permalink to this definition">¶</a></dt>
<span>

        

        </span></dl>

</div>
<div class="section" id="detailed-description">
<h4>Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h4>
<p>Cancel a group of unfinished registered futures on destruction. Guarantees that the registered set of futures will be canceled whatever the reason of the destruction of the group. All public member functions are thread-safe unless specified.</p>
</div>
<div class="section" id="function-documentation">
<h4>Function Documentation<a class="headerlink" href="#function-documentation" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="qi::ScopedFutureGroup::~ScopedFutureGroup">
 <code class="descclassname">qi::ScopedFutureGroup::</code><code class="descname">~ScopedFutureGroup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qi::ScopedFutureGroup::~ScopedFutureGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Destructor, cancel all unfinished futures registered.</p>
</dd></dl>

<dl class="function">
<dt>
template&lt;class T&gt;</dt>
<dt id="qi::ScopedFutureGroup::add__Future:T:">
<p><em>Brief: </em></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>future</strong> -- Future to register. </li>
</ul>
</td>
</tr>
</tbody>
</table>
<a class="reference internal" href="../../../../../naoqi/stdtypes.html#void" title="void">void</a> <code class="descclassname">qi::ScopedFutureGroup::</code><code class="descname">add</code><span class="sig-paren">(</span>Future&lt;T&gt; <em>future</em><span class="sig-paren">)</span><a class="headerlink" href="#qi::ScopedFutureGroup::add__Future:T:" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a future to be canceled if not finished when this object is destroyed, or if cancelAll() is called. Futures finishing before cancelation will be automatically unregistered. Non-cancelable futures will be ignored.</p>
</dd></dl>

<dl class="function">
<dt id="qi::ScopedFutureGroup::cancelAll">
<a class="reference internal" href="../../../../../naoqi/stdtypes.html#void" title="void">void</a> <code class="descclassname">qi::ScopedFutureGroup::</code><code class="descname">cancelAll</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qi::ScopedFutureGroup::cancelAll" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel all registered futures and unregister them.</p>
</dd></dl>

<dl class="function">
<dt id="qi::ScopedFutureGroup::emptyC">
<a class="reference internal" href="../../../../../naoqi/stdtypes.html#b" title="bool">bool</a> <code class="descclassname">qi::ScopedFutureGroup::</code><code class="descname">empty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><code class="descclassname"> const</code><a class="headerlink" href="#qi::ScopedFutureGroup::emptyC" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Brief: </em></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if there is no future registered, false otherwise. </td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="qi::ScopedFutureGroup::sizeC">
size_t <code class="descclassname">qi::ScopedFutureGroup::</code><code class="descname">size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><code class="descclassname"> const</code><a class="headerlink" href="#qi::ScopedFutureGroup::sizeC" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Brief: </em></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Count of registered futures. </td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          
            
              <div class="yui-b" id="sidebar">
                
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../contents.html">Site map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../news/index.html">What’s new</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../../index_dev_guide.html">NAOqi - Developer guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../getting_started/creating_applications/index.html">Creating an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../ref/life/index.html">Programming for a living robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../getting_started/index_tuto.html">Other tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../software/choregraphe/index.html">Choregraphe Suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../programming_index.html">SDKs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../naoqi/index.html">NAOqi APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html">qi Framework</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">API References</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../index.html">C++ qi API Reference</a><ul class="current">
<li class="toctree-l5 current"><a class="reference internal" href="index.html">C++ qi base API</a><ul class="current">
<li class="toctree-l6"><a class="reference internal" href="actor.html">qi::Actor and qi::Strand</a></li>
<li class="toctree-l6"><a class="reference internal" href="application.html">qi::Application</a></li>
<li class="toctree-l6"><a class="reference internal" href="atomic.html">qi::Atomic</a></li>
<li class="toctree-l6"><a class="reference internal" href="clock.html">qi clocks</a></li>
<li class="toctree-l6"><a class="reference internal" href="eventloop.html">qi::EventLoop</a></li>
<li class="toctree-l6"><a class="reference internal" href="future.html">qi::Promise, qi::Future</a></li>
<li class="toctree-l6 current"><a class="current reference internal" href="">qi::Future groups</a><ul class="simple">
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="iocolor.html">qi::IOColor</a></li>
<li class="toctree-l6"><a class="reference internal" href="log.html">qi::log</a></li>
<li class="toctree-l6"><a class="reference internal" href="macro.html">qi helper macros</a></li>
<li class="toctree-l6"><a class="reference internal" href="os.html">qi::os</a></li>
<li class="toctree-l6"><a class="reference internal" href="path.html">qi::path namespace</a></li>
<li class="toctree-l6"><a class="reference internal" href="periodictask.html">qi::PeriodicTask</a></li>
<li class="toctree-l6"><a class="reference internal" href="preproc.html">qi preprocessor macros</a></li>
<li class="toctree-l6"><a class="reference internal" href="stats.html">qi::stats namespace</a></li>
<li class="toctree-l6"><a class="reference internal" href="trackable.html">qi::Trackable</a></li>
<li class="toctree-l6"><a class="reference internal" href="translator.html">qi::Translator</a></li>
<li class="toctree-l6"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l6"><a class="reference internal" href="version.html">qi::Version</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../type/index.html">C++ qi type API</a></li>
<li class="toctree-l5"><a class="reference internal" href="../messaging/index.html">C++ qi messaging API</a></li>
<li class="toctree-l5"><a class="reference internal" href="../file.html">qi::File</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../cpp-classindex.html">C++ Class Index</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../cpp-funcindex.html">C++ Function Index</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../python/index.html">Python qi API reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../transtyping.html">&gt; Type equivalences between languages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../guide/index.html">Hands-on Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../design/index.html">Design Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../internal/typesystem.html">Type system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../internal/object.html">Object type erasure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../internal/template.html">Registering template types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../internal/call.html">Call code path</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../internal/messaging.html">Messaging system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog/index.html">qi Framework - ChangeLog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog/interface.html">qi Framework - Deprecation history</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../ref/index.html">Former NAOqi Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../simulators/simulator_index.html">Simulators</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../home_nao.html"><strong>NAO</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../home_pepper.html"><strong>Pepper</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../home_romeo.html"><strong>Romeo</strong> - Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../legal/notice.html">Legal notices</a></li>
</ul>

    <div id="on-this-page" style="display:none;">
        <h2 id="otp-link">On this page</h2>
        <div id="toc-list">
            <ul>
<li><a class="reference internal" href="#">qi::Future groups</a><ul>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed Description</a><ul>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#qi-scopedfuturegroup">qi::ScopedFutureGroup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference">Reference</a><ul>
<li><a class="reference internal" href="#qi-scopedfuturegroup-class-reference">qi::ScopedFutureGroup Class Reference</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#public-functions">Public Functions</a></li>
<li><a class="reference internal" href="#types">Types</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed Description</a></li>
<li><a class="reference internal" href="#function-documentation">Function Documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    </div>
        </div>
      </div>
              </div>
            
          
        </div>
    </main>
    <a href="#0" class="cd-top"></a>
    <div id="ft">
      
      <a title="Glossary" href="../../../../../glossary.html">Glossary</a>
      <a title="Site map" href="../../../../../contents.html">Site map</a>
      <a title="Index" href="../../../../../genindex.html">Index</a>
      <a title="Support" target="_blank" href="https://account.aldebaran.com/support/">Support</a>
      <a title="Contact" target="_blank" href="https://www.aldebaran.com/en/contact">Contact</a>
      <a title="Legal Notices" href="../../../../../legal/notice.html">Legal Notices</a>
      
      
      <img src="https://www.ald.softbankrobotics.com/sites/aldebaran/files/logos-picture/2016_digital_logo_sbr_112x31_0.png" alt="">
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>