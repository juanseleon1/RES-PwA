<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>qi.Future API &mdash; Aldebaran 2.5.9.8-r3 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '2.5.9.8-r3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="Aldebaran 2.5.9.8-r3 documentation" href="../../../../index.html" />
    <link rel="up" title="Python qi API reference" href="index.html" />
    <link rel="next" title="qi.Signal API" href="signal.html" />
    <link rel="prev" title="qi.Session API" href="session.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115894784-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115894784-1');
</script>

<script type="text/javascript" src="https://cloud.aldebaran-robotics.com/static/js/topbar.js"></script>
<style>
div#hd::after {
  
  
  content: 'NAOqi 2.5';
  
  
  
  position: absolute;
  margin-top: -54px;
  right: -4px;
  font-size: 125%;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  transform: rotate(45deg);
  }
</style>
<script>

$(window).ready(function () {

    //Aldebaran Top bar
     var barLinks = [];
     barLinks.push({'name':'Aldebaran Site', 'url':'http://www.aldebaran-robotics.com', 'click':'', 'img':'https://cloud.aldebaran-robotics.com/static/img/aldeb.png'});
     barLinks.push({'name':'Documentation', 'url':'../../../../index.html', 'click':"", 'img':''});
     function ShowBar(name, email, usertype) {
        var barParams = {
            'name'    : name,
            'email'   : email,
            'usertype': usertype,
            'loginfct': "FctLogin"
        }
        try { InitTopBar(barParams, barLinks); } catch (e) { console.log('Top Bar Init Failed'); }
    }
    ShowBar();

    var width_label = 0;
    $('dl.function-index dt > span').each(function () {
        $(this).css('width', 'auto');
        width_label = Math.max(width_label, $(this).width());
    }).width(width_label + 30);
    $('.sig-paren').width('auto');

    // first level navigation

    var buttonIds = [".naoqi", "pepper", "nao", "romeo"];
    for(id in buttonIds){
        $(id).removeClass("active");
    }
    //Aldebaran project
    if ($('.toctree-l1.current a').text().indexOf("Romeo ")==0){
        $(".romeo").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Pepper ")==0){
        $(".pepper").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("NAO ")==0){
        $(".nao").toggleClass('active');
    }
    else if($('.toctree-l1.current a').text().indexOf("NAOqi ")==0){
        $(".naoqi").toggleClass('active');
    }

    //qibuild project
    if ($('.toctree-l1.current a').text().indexOf("Welcome to qiBuild documentation !")==0){
        $(".beginner").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Advanced qibuild usage")==0){
        $(".advanced").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Hacking qiBuild")==0){
        $(".hacking").toggleClass('active');
    }

    // add "On this page", add cssClasses
    if($('.yui-g .section h1').length > 0){
        $('.yui-g .section h1:first').addClass("titleWrapper");
        $('.yui-g .section h1:first').after($("#on-this-page").html())
    }
    else if($('.yui-g .section h2').length > 0){
        $('.yui-g .section h2:first').addClass("titleWrapper");
        $('.yui-g .section h2:first').after($("#on-this-page").html())
    }
    //remove first element on this page
    if($("#on-this-page").length > 0){
        var doms = $(".yui-g .section :first").nextUntil("#toc-list");
        doms = doms.add($("#toc-list"));
        doms.wrapAll('<div class="iNavWrapper"></div>');
        $("#toc-list ul li a:first").remove()
        $("#toc-list ul:first").replaceWith($("#toc-list ul li").html())
    }
    $("#toc-list").hide();
    $("#otp-link").click(function(){
        $("#toc-list").slideToggle();
        if($("h2#otp-link").hasClass("change-before")){
            $("h2#otp-link").removeClass("change-before")
        }
        else{
            $("h2#otp-link").addClass("change-before")
        }
    });

    if($("a.current.reference.internal").length>0){
        var left = $("a.current.reference.internal").position().left-1;
        var width = $("a.current.reference.internal").width();
        var offset = 51;
        var sidebarWidth = 339;
        var right = sidebarWidth - (left + width + offset);
        if($("a.current.reference.internal").height() <= 15){
            $("a.current.reference.internal").css("white-space","nowrap");
            $("a.current.reference.internal").css({"backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        else{
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
            left = $("a.current.reference.internal").position().left-1;
            width = $("a.current.reference.internal").width();
            right = sidebarWidth - (left + width + offset);
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        $("a.current.reference.internal").parent().css("list-style-type","none");
    }

    //back to top
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700;
    //grab the "back to top" link
    var back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
        //back to top button
        ( $(this).scrollTop() > offset ) ? back_to_top.addClass('cd-is-visible') : back_to_top.removeClass('cd-is-visible cd-fade-out');
        if( $(this).scrollTop() > offset_opacity ) {
            back_to_top.addClass('cd-fade-out');
        }
    });

    //smooth scroll to top
    back_to_top.click(function(event){
        event.preventDefault();
        $('body,html').animate({
            scrollTop: 0 ,
        }, scroll_top_duration
        );
    });
    //add show source button

    //replace "go" with "search"
    $("#searchbox form input[type=submit]").val("Search")

    //trigger click on version triangle to jump to whats new
    $("#hd").click(function(e){if(e.pageX >= this.offsetWidth && e.pageY<120){$(".whatsnew")[0].click()}})
})

</script>


  </head>
  <body role="document">

    <div class="document">
  <div id="custom-doc" class="yui-t3">
    <div id="hd">
      
      <h1><a href="../../../../index.html">SoftBank Robotics documentation</a>
      
      
      <span><a class="whatsnew" href="../../../../news/index.html" >
      
          What's new in NAOqi 2.5?
      
      </a></span>
      
      </h1>
      <div id="global-nav">
        
        <a class="naoqi" title="NAOqi Developer guide" href="../../../../index_dev_guide.html">NAOqi</a>
        <a class="pepper" title="Pepper documentation" href="../../../../home_pepper.html">Pepper</a>
        <a class="nao" title="NAO documentation" href="../../../../home_nao.html">NAO</a>
        <a class="romeo" title="Romeo Documentation" href="../../../../home_romeo.html">Romeo</a>
        
        
        
        <div class="nav">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script></div>
      </div>

    </div>
    <main class="cd-container">
        <div id="bd">
          <div id="yui-main">
            <div class="yui-b">
              <div class="yui-g" id="dev-libqi-api-python-future">
                
  <div class="section" id="qi-future-api">
<span id="api-py-future"></span><h1>qi.Future API<a class="headerlink" href="#qi-future-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Promise and Future are a way to synchronise data between multiples threads.
The number of future associated to a promise is not limited.
Promise is the setter, future is the getter.
Basically, you have a task to do, that will return a value, you give it a Promise.
Then you have others thread that depend on the result of that task, you give them future
associated to that promise, the future will block until the value or an error is set
by the promise.</p>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="qi.FutureState">
<code class="descclassname">qi.</code><code class="descname">FutureState</code><a class="headerlink" href="#qi.FutureState" title="Permalink to this definition">¶</a></dt>
<dd><p>Constants that describe the state of the Future.
This is the status returned by <a class="reference internal" href="#qi.Future.wait" title="qi.Future.wait"><code class="xref py py-meth docutils literal"><span class="pre">qi.Future.wait()</span></code></a></p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>qi.FutureState.None</td>
<td>The future is not bound.</td>
</tr>
<tr class="row-even"><td>qi.FutureState.Running</td>
<td>The future is attached to a Promise.</td>
</tr>
<tr class="row-odd"><td>qi.FutureState.Canceled</td>
<td>The future has been canceled</td>
</tr>
<tr class="row-even"><td>qi.FutureState.FinishedWithError</td>
<td>The future has finished and an error is available</td>
</tr>
<tr class="row-odd"><td>qi.FutureState.FinishedWithValue</td>
<td>The future has finished and a value is available</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="qi.FutureTimeout">
<code class="descclassname">qi.</code><code class="descname">FutureTimeout</code><a class="headerlink" href="#qi.FutureTimeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Constants to use for timeout arguments.</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>qi.FutureTimeout.None</td>
<td>Do not wait.</td>
</tr>
<tr class="row-even"><td>qi.FutureTimeout.Infinite</td>
<td>Block forever</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="qi.Promise">
<em class="property">class </em><code class="descclassname">qi.</code><code class="descname">Promise</code><a class="headerlink" href="#qi.Promise" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="Promise.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>cb</em><span class="sig-paren">)</span><a class="headerlink" href="#Promise.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cb</strong> &#8211; a python callable</td>
</tr>
</tbody>
</table>
<p>If the promise was constructed with a callback in parameter, it will be executed
when a future associated to the promise is cancelled.
The first argument of the callback is the promise itself.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Promise.future">
<code class="descname">future</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; qi.Future<a class="headerlink" href="#qi.Promise.future" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a qi.Future from the promise, you can get multiple from the same promise.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Promise.isCancelRequested">
<code class="descname">isCancelRequested</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; bool<a class="headerlink" href="#qi.Promise.isCancelRequested" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the future associated with the promise asked for cancelation</p>
</dd></dl>

<dl class="method">
<dt id="qi.Promise.setCanceled">
<code class="descname">setCanceled</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; None<a class="headerlink" href="#qi.Promise.setCanceled" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the state of the promise to Canceled</p>
</dd></dl>

<dl class="method">
<dt id="qi.Promise.setError">
<code class="descname">setError</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span> &rarr; None<a class="headerlink" href="#qi.Promise.setError" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the error of the promise</p>
</dd></dl>

<dl class="method">
<dt id="qi.Promise.setValue">
<code class="descname">setValue</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span> &rarr; None<a class="headerlink" href="#qi.Promise.setValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of the promise</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="qi.Future">
<em class="property">class </em><code class="descclassname">qi.</code><code class="descname">Future</code><a class="headerlink" href="#qi.Future" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="qi.Future.addCallback">
<code class="descname">addCallback</code><span class="sig-paren">(</span><em>cb</em><span class="sig-paren">)</span> &rarr; None<a class="headerlink" href="#qi.Future.addCallback" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cb</strong> &#8211; a python callable, could be a method or a function.</td>
</tr>
</tbody>
</table>
<p>Add a callback that will be called when the future becomes ready.
The callback will be called even if the future is already ready.
The first argument of the callback is the future itself.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.andThen">
<code class="descname">andThen</code><span class="sig-paren">(</span><em>cb</em><span class="sig-paren">)</span> &rarr; None<a class="headerlink" href="#qi.Future.andThen" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cb</strong> &#8211; a python callable, could be a method or a function.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a future that will contain the return value of the callback.</td>
</tr>
</tbody>
</table>
<p>Add a callback that will be called when the future becomes ready if it has a value.
If the future finishes with an error, the callback is not called and the future returned by andThen is set to that error.
The callback will be called even if the future is already ready.
The first argument of the callback is the value of the future itself.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.cancel">
<code class="descname">cancel</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; None<a class="headerlink" href="#qi.Future.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Ask for cancelation.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.error">
<code class="descname">error</code><span class="sig-paren">(</span><em>timeout</em><span class="sig-paren">)</span> &rarr; string<a class="headerlink" href="#qi.Future.error" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> &#8211; a time in milliseconds. Optional.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the error of the future.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">a RuntimeError if the timeout is reached or the future has no error.</td>
</tr>
</tbody>
</table>
<p>Block until the future is ready.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.hasError">
<code class="descname">hasError</code><span class="sig-paren">(</span><em>timeout</em><span class="sig-paren">)</span> &rarr; bool<a class="headerlink" href="#qi.Future.hasError" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> &#8211; a time in milliseconds. Optional.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">true if the future has an error.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">a RuntimeError if the timeout is reached.</td>
</tr>
</tbody>
</table>
<p>Return true or false depending on the future having an error.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.hasValue">
<code class="descname">hasValue</code><span class="sig-paren">(</span><em>timeout</em><span class="sig-paren">)</span> &rarr; bool<a class="headerlink" href="#qi.Future.hasValue" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> &#8211; a time in milliseconds. Optional.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">true if the future has a value.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">a RuntimeError if the timeout is reached.</td>
</tr>
</tbody>
</table>
<p>Return true or false depending on the future having a value.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.isCancelable">
<code class="descname">isCancelable</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; bool<a class="headerlink" href="#qi.Future.isCancelable" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">always true, all future are cancelable now</td>
</tr>
</tbody>
</table>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 2.5.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="qi.Future.isCanceled">
<code class="descname">isCanceled</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; bool<a class="headerlink" href="#qi.Future.isCanceled" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">true if the future is canceled.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qi.Future.isFinished">
<code class="descname">isFinished</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; bool<a class="headerlink" href="#qi.Future.isFinished" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">true if the future is not running anymore (if hasError or hasValue or isCanceled).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qi.Future.isRunning">
<code class="descname">isRunning</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; bool<a class="headerlink" href="#qi.Future.isRunning" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">true if the future is still running.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qi.Future.then">
<code class="descname">then</code><span class="sig-paren">(</span><em>cb</em><span class="sig-paren">)</span> &rarr; None<a class="headerlink" href="#qi.Future.then" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cb</strong> &#8211; a python callable, could be a method or a function.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a future that will contain the return value of the callback.</td>
</tr>
</tbody>
</table>
<p>Add a callback that will be called when the future becomes ready.
The callback will be called even if the future is already ready.
The first argument of the callback is the future itself.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.unwrap">
<code class="descname">unwrap</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; Future<a class="headerlink" href="#qi.Future.unwrap" title="Permalink to this definition">¶</a></dt>
<dd><p>If this is a Future of a Future of X, return a Future of X. The state of both futures is forwarded and cancel requests are forwarded to the appropriate future</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.value">
<code class="descname">value</code><span class="sig-paren">(</span><em>timeout</em><span class="sig-paren">)</span> &rarr; value<a class="headerlink" href="#qi.Future.value" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> &#8211; a time in milliseconds. Optional.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the value of the future.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">a RuntimeError if the timeout is reached or the future has error.</td>
</tr>
</tbody>
</table>
<p>Block until the future is ready.</p>
</dd></dl>

<dl class="method">
<dt id="qi.Future.wait">
<code class="descname">wait</code><span class="sig-paren">(</span><em>timeout</em><span class="sig-paren">)</span> &rarr; qi.FutureState<a class="headerlink" href="#qi.Future.wait" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> &#8211; a time in milliseconds. Optional.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a <a class="reference internal" href="#qi.FutureState" title="qi.FutureState"><code class="xref py py-data docutils literal"><span class="pre">qi.FutureState</span></code></a>.</td>
</tr>
</tbody>
</table>
<p>Wait for the future to be ready.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Simple example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">qi</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">doSomeWork</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
  <span class="c">#do your work here instead of sleeping</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">p</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">qi</span><span class="o">.</span><span class="n">Promise</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">future</span><span class="p">()</span>
<span class="n">qi</span><span class="o">.</span><span class="n">async</span><span class="p">(</span><span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">doSomeWork</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>
<span class="k">print</span> <span class="s">&quot;result:&quot;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</pre></div>
</div>
<p>With callback:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">qi</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">doSomeWork</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
  <span class="c">#do your work here instead of sleeping</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="n">p</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">resultReady</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">hasValue</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&quot;Value:&quot;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
  <span class="k">elif</span> <span class="n">f</span><span class="o">.</span><span class="n">hasError</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&quot;Error:&quot;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">error</span><span class="p">()</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">qi</span><span class="o">.</span><span class="n">Promise</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">future</span><span class="p">()</span>
<span class="n">qi</span><span class="o">.</span><span class="n">async</span><span class="p">(</span><span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">doSomeWork</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span>

<span class="c">#resultReady will be called even if the result is already there.</span>
<span class="n">f</span><span class="o">.</span><span class="n">addCallback</span><span class="p">(</span><span class="n">resultReady</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="cancellation-support">
<h2>Cancellation support<a class="headerlink" href="#cancellation-support" title="Permalink to this headline">¶</a></h2>
<p>In some situations, you will want to create asynchronous operations that can be
interrupted in the middle of their execution. For that you can set a callback
to the promise that will be called when someone asks for cancellation or just
check for <code class="docutils literal"><span class="pre">isCancelRequested()</span></code> on the promise.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">qi</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="k">class</span> <span class="nc">FakeOperation</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">doStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&#39;I executed one step&#39;</span>

    <span class="k">def</span> <span class="nf">longOperation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">promise</span><span class="p">):</span>
        <span class="s">&quot;do steps or cancel before the end&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">promise</span><span class="o">.</span><span class="n">isCancelRequested</span><span class="p">():</span>
                <span class="k">print</span> <span class="s">&#39;Cancel requested, aborting&#39;</span>
                <span class="n">promise</span><span class="o">.</span><span class="n">setCanceled</span><span class="p">()</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">doStep</span><span class="p">()</span>
        <span class="c"># if an error occurred, promise.setError(&quot;error&quot;)</span>
        <span class="c"># use setValue if everything went ok</span>
        <span class="k">print</span> <span class="s">&#39;longOperation finished&#39;</span>
        <span class="n">promise</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">asyncLongOperation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">&quot;start long operation and return a future&quot;</span>
        <span class="n">promise</span> <span class="o">=</span> <span class="n">qi</span><span class="o">.</span><span class="n">Promise</span><span class="p">()</span>
        <span class="n">qi</span><span class="o">.</span><span class="n">async</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">longOperation</span><span class="p">,</span> <span class="n">promise</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">promise</span><span class="o">.</span><span class="n">future</span><span class="p">()</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">FakeOperation</span><span class="p">()</span>

<span class="n">fut</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">asyncLongOperation</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">fut</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>

<span class="k">assert</span> <span class="n">fut</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span> <span class="o">==</span> <span class="n">qi</span><span class="o">.</span><span class="n">FutureState</span><span class="o">.</span><span class="n">Canceled</span>
<span class="k">assert</span> <span class="n">fut</span><span class="o">.</span><span class="n">isCanceled</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">fut</span><span class="o">.</span><span class="n">isFinished</span><span class="p">()</span>
</pre></div>
</div>
<dl class="function">
<dt id="qi.PromiseNoop">
<code class="descclassname">qi.</code><code class="descname">PromiseNoop</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#qi.PromiseNoop" title="Permalink to this definition">¶</a></dt>
<dd><p>No operation function
.. deprecated:: 2.5</p>
</dd></dl>

</div>
</div>


              </div>
            </div>
          </div>
          
            
              <div class="yui-b" id="sidebar">
                
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../contents.html">Site map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../news/index.html">What’s new</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../index_dev_guide.html">NAOqi - Developer guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/creating_applications/index.html">Creating an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ref/life/index.html">Programming for a living robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../getting_started/index_tuto.html">Other tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../software/choregraphe/index.html">Choregraphe Suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../programming_index.html">SDKs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../naoqi/index.html">NAOqi APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">qi Framework</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">API References</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../cpp/index.html">C++ qi API Reference</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Python qi API reference</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="application.html">qi.Application API</a></li>
<li class="toctree-l5"><a class="reference internal" href="clock.html">qi clock API</a></li>
<li class="toctree-l5"><a class="reference internal" href="logging.html">qi.logging API</a></li>
<li class="toctree-l5"><a class="reference internal" href="path.html">qi.path API</a></li>
<li class="toctree-l5"><a class="reference internal" href="session.html">qi.Session API</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="">qi.Future API</a><ul class="simple">
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="signal.html">qi.Signal API</a></li>
<li class="toctree-l5"><a class="reference internal" href="property.html">qi.Property API</a></li>
<li class="toctree-l5"><a class="reference internal" href="types.html">qi.Types* API</a></li>
<li class="toctree-l5"><a class="reference internal" href="bind.html">Bind API</a></li>
<li class="toctree-l5"><a class="reference internal" href="async.html">qi.async, qi.PeriodicTask API</a></li>
<li class="toctree-l5"><a class="reference internal" href="translator.html">qi.Translator API</a></li>
<li class="toctree-l5"><a class="reference internal" href="module.html">qi.Module API</a></li>
<li class="toctree-l5"><a class="reference internal" href="file.html">qicore.File</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../transtyping.html">&gt; Type equivalences between languages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../guide/index.html">Hands-on Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../design/index.html">Design Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../internal/typesystem.html">Type system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../internal/object.html">Object type erasure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../internal/template.html">Registering template types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../internal/call.html">Call code path</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../internal/messaging.html">Messaging system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog/index.html">qi Framework - ChangeLog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelog/interface.html">qi Framework - Deprecation history</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ref/index.html">Former NAOqi Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../simulators/simulator_index.html">Simulators</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../home_nao.html"><strong>NAO</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../home_pepper.html"><strong>Pepper</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../home_romeo.html"><strong>Romeo</strong> - Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../legal/notice.html">Legal notices</a></li>
</ul>

    <div id="on-this-page" style="display:none;">
        <h2 id="otp-link">On this page</h2>
        <div id="toc-list">
            <ul>
<li><a class="reference internal" href="#">qi.Future API</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#reference">Reference</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#cancellation-support">Cancellation support</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
        </div>
      </div>
              </div>
            
          
        </div>
    </main>
    <a href="#0" class="cd-top"></a>
    <div id="ft">
      
      <a title="Glossary" href="../../../../glossary.html">Glossary</a>
      <a title="Site map" href="../../../../contents.html">Site map</a>
      <a title="Index" href="../../../../genindex.html">Index</a>
      <a title="Support" target="_blank" href="https://account.aldebaran.com/support/">Support</a>
      <a title="Contact" target="_blank" href="https://www.aldebaran.com/en/contact">Contact</a>
      <a title="Legal Notices" href="../../../../legal/notice.html">Legal Notices</a>
      
      
      <img src="https://www.ald.softbankrobotics.com/sites/aldebaran/files/logos-picture/2016_digital_logo_sbr_112x31_0.png" alt="">
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>