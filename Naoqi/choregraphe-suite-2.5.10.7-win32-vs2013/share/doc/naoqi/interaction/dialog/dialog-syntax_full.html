<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>QiChat - Syntax &mdash; Aldebaran 2.5.9.8-r3 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.5.9.8-r3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Aldebaran 2.5.9.8-r3 documentation" href="../../../index.html" />
    <link rel="up" title="QiChat - Table of Content" href="aldialog_syntax_toc.html" />
    <link rel="next" title="QiChat - Overview" href="aldialog_syntax_overview.html" />
    <link rel="prev" title="QiChat - Introduction" href="dialog.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115894784-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115894784-1');
</script>

<script type="text/javascript" src="https://cloud.aldebaran-robotics.com/static/js/topbar.js"></script>
<style>
div#hd::after {
  
  
  content: 'NAOqi 2.5';
  
  
  
  position: absolute;
  margin-top: -54px;
  right: -4px;
  font-size: 125%;
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  transform: rotate(45deg);
  }
</style>
<script>

$(window).ready(function () {

    //Aldebaran Top bar
     var barLinks = [];
     barLinks.push({'name':'Aldebaran Site', 'url':'http://www.aldebaran-robotics.com', 'click':'', 'img':'https://cloud.aldebaran-robotics.com/static/img/aldeb.png'});
     barLinks.push({'name':'Documentation', 'url':'../../../index.html', 'click':"", 'img':''});
     function ShowBar(name, email, usertype) {
        var barParams = {
            'name'    : name,
            'email'   : email,
            'usertype': usertype,
            'loginfct': "FctLogin"
        }
        try { InitTopBar(barParams, barLinks); } catch (e) { console.log('Top Bar Init Failed'); }
    }
    ShowBar();

    var width_label = 0;
    $('dl.function-index dt > span').each(function () {
        $(this).css('width', 'auto');
        width_label = Math.max(width_label, $(this).width());
    }).width(width_label + 30);
    $('.sig-paren').width('auto');

    // first level navigation

    var buttonIds = [".naoqi", "pepper", "nao", "romeo"];
    for(id in buttonIds){
        $(id).removeClass("active");
    }
    //Aldebaran project
    if ($('.toctree-l1.current a').text().indexOf("Romeo ")==0){
        $(".romeo").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Pepper ")==0){
        $(".pepper").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("NAO ")==0){
        $(".nao").toggleClass('active');
    }
    else if($('.toctree-l1.current a').text().indexOf("NAOqi ")==0){
        $(".naoqi").toggleClass('active');
    }

    //qibuild project
    if ($('.toctree-l1.current a').text().indexOf("Welcome to qiBuild documentation !")==0){
        $(".beginner").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Advanced qibuild usage")==0){
        $(".advanced").toggleClass('active');
    }
    else if ($('.toctree-l1.current a').text().indexOf("Hacking qiBuild")==0){
        $(".hacking").toggleClass('active');
    }

    // add "On this page", add cssClasses
    if($('.yui-g .section h1').length > 0){
        $('.yui-g .section h1:first').addClass("titleWrapper");
        $('.yui-g .section h1:first').after($("#on-this-page").html())
    }
    else if($('.yui-g .section h2').length > 0){
        $('.yui-g .section h2:first').addClass("titleWrapper");
        $('.yui-g .section h2:first').after($("#on-this-page").html())
    }
    //remove first element on this page
    if($("#on-this-page").length > 0){
        var doms = $(".yui-g .section :first").nextUntil("#toc-list");
        doms = doms.add($("#toc-list"));
        doms.wrapAll('<div class="iNavWrapper"></div>');
        $("#toc-list ul li a:first").remove()
        $("#toc-list ul:first").replaceWith($("#toc-list ul li").html())
    }
    $("#toc-list").hide();
    $("#otp-link").click(function(){
        $("#toc-list").slideToggle();
        if($("h2#otp-link").hasClass("change-before")){
            $("h2#otp-link").removeClass("change-before")
        }
        else{
            $("h2#otp-link").addClass("change-before")
        }
    });

    if($("a.current.reference.internal").length>0){
        var left = $("a.current.reference.internal").position().left-1;
        var width = $("a.current.reference.internal").width();
        var offset = 51;
        var sidebarWidth = 339;
        var right = sidebarWidth - (left + width + offset);
        if($("a.current.reference.internal").height() <= 15){
            $("a.current.reference.internal").css("white-space","nowrap");
            $("a.current.reference.internal").css({"backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        else{
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
            left = $("a.current.reference.internal").position().left-1;
            width = $("a.current.reference.internal").width();
            right = sidebarWidth - (left + width + offset);
            $("a.current.reference.internal").css({"float":"right","backgroundColor":"#0F2939","paddingTop":"2px", "paddingBottom":"2px","paddingLeft":left+"px","marginLeft":"-"+left+"px", "paddingRight":right+"px","marginRight":"-"+right+"px", "boxShadow":"0px 0px 1px rgb(15, 41, 57)"});
        }
        $("a.current.reference.internal").parent().css("list-style-type","none");
    }

    //back to top
    var offset = 300,
    //browser window scroll (in pixels) after which the "back to top" link opacity is reduced
    offset_opacity = 1200,
    //duration of the top scrolling animation (in ms)
    scroll_top_duration = 700;
    //grab the "back to top" link
    var back_to_top = $('.cd-top');

    //hide or show the "back to top" link
    $(window).scroll(function(){
        //back to top button
        ( $(this).scrollTop() > offset ) ? back_to_top.addClass('cd-is-visible') : back_to_top.removeClass('cd-is-visible cd-fade-out');
        if( $(this).scrollTop() > offset_opacity ) {
            back_to_top.addClass('cd-fade-out');
        }
    });

    //smooth scroll to top
    back_to_top.click(function(event){
        event.preventDefault();
        $('body,html').animate({
            scrollTop: 0 ,
        }, scroll_top_duration
        );
    });
    //add show source button

    //replace "go" with "search"
    $("#searchbox form input[type=submit]").val("Search")

    //trigger click on version triangle to jump to whats new
    $("#hd").click(function(e){if(e.pageX >= this.offsetWidth && e.pageY<120){$(".whatsnew")[0].click()}})
})

</script>


  </head>
  <body role="document">

    <div class="document">
  <div id="custom-doc" class="yui-t3">
    <div id="hd">
      
      <h1><a href="../../../index.html">SoftBank Robotics documentation</a>
      
      
      <span><a class="whatsnew" href="../../../news/index.html" >
      
          What's new in NAOqi 2.5?
      
      </a></span>
      
      </h1>
      <div id="global-nav">
        
        <a class="naoqi" title="NAOqi Developer guide" href="../../../index_dev_guide.html">NAOqi</a>
        <a class="pepper" title="Pepper documentation" href="../../../home_pepper.html">Pepper</a>
        <a class="nao" title="NAO documentation" href="../../../home_nao.html">NAO</a>
        <a class="romeo" title="Romeo Documentation" href="../../../home_romeo.html">Romeo</a>
        
        
        
        <div class="nav">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script></div>
      </div>

    </div>
    <main class="cd-container">
        <div id="bd">
          <div id="yui-main">
            <div class="yui-b">
              <div class="yui-g" id="naoqi-interaction-dialog-dialog-syntax_full">
                
  <div class="section" id="qichat-syntax">
<span id="dialog-rules"></span><h1>QiChat - Syntax<a class="headerlink" href="#qichat-syntax" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../index_interaction.html#naoqi-interaction"><span>NAOqi Interaction engines</span></a> -
<a class="reference internal" href="aldialog_syntax_toc.html#dialog-toc"><span>Table of Content</span></a> | <a class="reference internal" href="dialog.html#dialog-concepts"><span>Introduction</span></a> |
Syntax | <a class="reference internal" href="aldialog_syntax_overview.html#dialog-overview"><span>Overview</span></a> | <a class="reference internal" href="aldialog_syntax_cheat_sheet.html#dialog-cheat-sheet"><span>Cheat Sheet</span></a></p>
<hr class="docutils" />
<div class="section" id="header-keywords">
<span id="basic-rule"></span><h2>Header keywords<a class="headerlink" href="#header-keywords" title="Permalink to this headline">¶</a></h2>
<div class="section" id="concept">
<span id="dialog-concept-def"></span><h3>concept<a class="headerlink" href="#concept" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">concept</span>:(name) [word1 word2 &quot;word3 word4&quot;]
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>word1</em> and <em>word2</em> are isolated words,</li>
<li><em>&#8220;word3 word4&#8221;</em> is a phrase, i.e. a group of several words,</li>
<li><em>name</em> is the name of the static concept gathering all the items in an ordered list.</li>
</ul>
<p><strong>Note</strong>: a static concept can contain <a class="reference internal" href="#or-rule"><span>choices</span></a>,
<a class="reference internal" href="#optional-delimiter"><span>optional words and phrases</span></a>, concepts
(static and <a class="reference internal" href="#dialog-dynamic-def"><span>dynamic</span></a>), functions
(<a class="reference internal" href="#rand-function"><span>^rand</span></a>, <a class="reference internal" href="#first-function"><span>^first</span></a>), <a class="reference internal" href="#dialog-variable"><span>variables</span></a>
and <a class="reference internal" href="#condition-rule"><span>conditions</span></a>.</p>
<p><strong>Usage</strong></p>
<p>Defines a static list of items (words and/or phrases).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Phrase means a group of word, not a sentence, be aware that any
punctuation character will be automatically removed.</p>
</div>
<p>Static concepts are global, in other words, they are usable in different <strong>Topics</strong>.</p>
<p>To use a concept in a rule, see: <a class="reference internal" href="#dialog-concept"><span>Concept call: ~</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="ow">concept</span>:(greetings) ^rand[hi hello &quot;hey there&quot;]

<span class="ow">concept</span>:(wine) [red white] wine
<span class="ow">concept</span>:(alcohol) [beer ~wine]

<span class="o">u:</span><span class="nv">(~greetings)</span> ~greetings
<span class="o">u:</span><span class="nv">(do you have _~drink)</span> yes, I have $1
<span class="o">u:</span><span class="nv">(I want to drink something)</span> do you want ~alcohol?
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hey there
hello
&gt; do you have white wine?
yes, I have white wine
&gt; I want to drink something
do you want beer?
&gt; I want to drink something
do you want red wine?
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="dynamic">
<span id="dialog-dynamic-def"></span><h3>dynamic<a class="headerlink" href="#dynamic" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">dynamic</span>:name
</pre></div>
</div>
<p><strong>Note</strong>: a dynamic concept can only contain a list of words or phrases between
a single <a class="reference internal" href="#or-rule"><span>choice [ ]</span></a>.</p>
<p><strong>Usage</strong></p>
<p>Declares a dynamic list of items (words and/or phrases).
This list is local to a <strong>Topic</strong>.</p>
<p><strong>Conditions</strong></p>
<p>Dynamic concepts must be modified at runtime, using:</p>
<ul class="simple">
<li><a class="reference internal" href="aldialog-api.html#ALDialogProxy::setConcept__ssCR.ssCR.std::vector:ss:CR" title="ALDialogProxy::setConcept"><code class="xref cpp cpp-func docutils literal"><span class="pre">ALDialogProxy::setConcept</span></code></a></li>
</ul>
<p>To use a concept in a rule, see: <a class="reference internal" href="#dialog-concept"><span>Concept call: ~</span></a>.
Concept are global, setConcept will affect the concept in all topics.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~dynamic()
<span class="ow">language</span>: enu

<span class="ow">dynamic</span>:mp3
<span class="o">u:</span><span class="nv">({please} [&quot;i want&quot; play] _~mp3)</span> let&#39;s play $1
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># call it when speech recognition is running</span>
<span class="n">proxy</span> <span class="o">=</span> <span class="n">ALProxy</span><span class="p">(</span><span class="s">&quot;ALDialog&quot;</span><span class="p">)</span>
<span class="n">proxy</span><span class="o">.</span><span class="n">setConcept</span><span class="p">(</span><span class="s">&quot;mp3&quot;</span><span class="p">,</span><span class="s">&quot;enu&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;mika&quot;</span><span class="p">,</span> <span class="s">&quot;queen&quot;</span><span class="p">,</span> <span class="s">&quot;village people&quot;</span><span class="p">,</span> <span class="s">&quot;boy george&quot;</span><span class="p">])</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="include">
<span id="topic-include"></span><h3>include<a class="headerlink" href="#include" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">include</span>: file.top
</pre></div>
</div>
<p><strong>Note</strong>: include must be specified just after the <a class="reference internal" href="#topic-name"><span>name</span></a> and
the <a class="reference internal" href="#topic-language"><span>language</span></a> of a topic, and before the first
<a class="reference internal" href="#dialog-concept-def"><span>concept</span></a> or <a class="reference internal" href="#dialog-rule"><span>rule</span></a>.</p>
<p><strong>Usage</strong></p>
<p>Includes a file in the topic.</p>
<p><strong>Conditions</strong></p>
<p>The included file must be in the same folder than the topic that calls the include.
One exception to this rule: <a class="reference internal" href="lexicon.html#lexicon"><span>Dialog Lexicon</span></a> can be included anywhere even if it
is not located in the same folder.
For further details, see: <a class="reference internal" href="lexicon.html#use-lexicon"><span>How to use dialog lexicon in QiChat</span></a>.</p>
<p><strong>Effect</strong></p>
<p>An included topic has the same behavior than topic:</p>
<ul class="simple">
<li>The included file is loaded as soon as the calling topic is loaded.</li>
<li>The included file is activated as soon as the calling topic is activated</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~ok()
<span class="ow">language</span>: enu
# suppose my_lexicon_enu contains concept ~confirmation and ~negation
<span class="ow">include</span>:my_lexicon_enu.top
<span class="o">u:</span><span class="nv">(hello)</span> are you ok ?
   <span class="o">u1:</span><span class="nv">(~confirmation)</span> yupi
   <span class="o">u1:</span><span class="nv">(~negation)</span> Doh !
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="description">
<span id="topic-description"></span><h3>description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>description: cook
</pre></div>
</div>
<p>Description must be specified just after the <a class="reference internal" href="#topic-include"><span>include</span></a>.</p>
<p><strong>Usage</strong></p>
<p>Current focus description is in variable $Dialog/FocusDescription.
If focus doesn&#8217;t have description, then variable is empty.</p>
<hr class="docutils" />
</div>
<div class="section" id="overload">
<span id="topic-overload"></span><h3>overload<a class="headerlink" href="#overload" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>overload: topicName
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The overload keyword must be placed before the include one (if any).</p>
</div>
<p>Allows you to redefine another topic. The overloaded topic will never be activated.</p>
<p><strong>Example</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>topic: ~mysetup()
language: enu

overload: mysetup
u:(raise your volume) I don&#39;t want to make it
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="pronunciation">
<span id="topic-pronunciation"></span><h3>pronunciation<a class="headerlink" href="#pronunciation" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>pronunciation:(word) wordPronunciation
</pre></div>
</div>
<p>Changes the default speech recognition way to pronounce a word.
For example &#8220;I&#8221; should be pronounced &#8220;capitalize i&#8221;.</p>
<p><strong>Note</strong>: Following words pronunciation are automatically managed by
dialog engine: &#8220;I&#8221; in English and &#8220;à&#8221; in French.</p>
<div class="highlight-ini"><div class="highlight"><pre>topic: ~play()
language: enu

pronunciation:(I) [i]
u:(I want to play) let&#39;s play
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="language">
<span id="topic-language"></span><h3>language<a class="headerlink" href="#language" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">language</span>: enu
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Defines the language of the topic.</p>
<p>A topic can have the same name in different languages. For example in English
&#8220;cars&#8221; topic and cars topic in French.
In a language, a topic mush have a unique name.</p>
<p>For further details see: <img alt="nao" class="img-inline" src="../../../_images/nao.png" /> <a class="reference internal" href="../../../family/robots/languages_nao.html#dialog-supported-languages-nao"><span>Dialog - List of supported Languages</span></a>
or <img alt="pepp" class="img-inline" src="../../../_images/pepp.png" /> <a class="reference internal" href="../../../family/pepper_technical/languages_pep.html#dialog-supported-languages-pep"><span>Dialog - List of supported Languages</span></a>.</p>
<hr class="docutils" />
</div>
<div class="section" id="topic">
<span id="topic-name"></span><h3>topic<a class="headerlink" href="#topic" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~name ()
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Defines the name to the topic.
A topic must have one name and can have only one.</p>
<p>The name of a topic must be unique in a given language.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#topic-functions"><span>Topic properties</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="def">
<span id="dialog-define-functions"></span><h3>def<a class="headerlink" href="#def" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>def:name($parameter1, $parameter2, ..) robot output
</pre></div>
</div>
<p><strong>Note</strong>:</p>
<p>Every parameter is local to the function in which it has been defined. Outside
of this function every occurrence of $parameter1, $parameter2, .. will be
replaced by the value stored in ALMemory.</p>
<p><strong>Usage</strong></p>
<p>Defines a function which can be used in other qiChat rules as any function.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#use-defined-functions"><span>^defined_function</span></a></li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="rules">
<span id="dialog-rule"></span><h2>Rules<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="user-rule">
<span id="simple-rule"></span><h3>User rule<a class="headerlink" href="#user-rule" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(Input)</span> Answer
<span class="o">u:</span><span class="nv">(Input)</span>
  Answer
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>Input</em> is the <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a>,</li>
<li><em>Answer</em> is the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>.</li>
</ul>
<p>Indentation and blank lines are ignored.</p>
<p><strong>Usage</strong></p>
<p>Makes the robot say or do the <em>Answer</em> when he hears the <em>Input</em>.</p>
<p><strong>Effect</strong></p>
<p>If the <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> matches, then the topic that contains the rule takes the focus.</p>
<p>For further details, see: <a class="reference internal" href="dialog.html#dialog-doc-focus"><span>Focus</span></a>.</p>
<p><strong>Conditions</strong></p>
<p>The topic containing the user rules must be activated to answer.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello)</span> hello human
<span class="o">u:</span><span class="nv">(how are you)</span> I feel tired, my batteries are low
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hello
hello human
&gt; how are you
I feel tired, my batteries are low
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#rule-functions"><span>Rule functions and properties</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="user-subrule">
<span id="subrules"></span><h3>User subrule<a class="headerlink" href="#user-subrule" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input1)</span> answer
   <span class="o">u1:</span><span class="nv">(input2)</span> answer
   <span class="o">u1:</span><span class="nv">(input3)</span> answer
     <span class="o">u2:</span><span class="nv">(input4)</span> answer
        <span class="o">u3:</span><span class="nv">(input5)</span> answer
     <span class="o">u2:</span><span class="nv">(input6)</span> answer

<span class="ow">proposal</span>: sentence
   <span class="o">u1:</span><span class="nv">(input7)</span> answer
   <span class="o">u1:</span><span class="nv">(input8)</span> answer
</pre></div>
</div>
<p>Where <strong>u1:</strong>, <strong>u2:</strong> and <strong>u3:</strong> are user subrules.</p>
<p>The indentation underlines the relationship between a rule and its subrules.</p>
<p><strong>Usage</strong></p>
<p>Allows creating several conversational contexts, making some rules activated if
and only if a main <a class="reference internal" href="#simple-rule"><span>User rule</span></a> or <a class="reference internal" href="#proposal"><span>Proposal</span></a> has previously matched.</p>
<p><strong>Activation / deactivation</strong></p>
<p>At first, the <a class="reference internal" href="#simple-rule"><span>User rules</span></a> and <a class="reference internal" href="#proposal"><span>Proposal</span></a> are activated
while <strong>subrules</strong> are deactivated.</p>
<ul class="simple">
<li>If a <a class="reference internal" href="#simple-rule"><span>User rule</span></a> matches and if it has a <a class="reference internal" href="#term-scope"><span class="xref std std-term">scope</span></a>, its <strong>subrules</strong>
(<strong>u1:</strong>) are activated; the other <a class="reference internal" href="#simple-rule"><span>User rule</span></a> remain activated.</li>
<li>If one of the <strong>u1:</strong> subrule matches, then its own subrules (<strong>u2:</strong>) are
activated, and the first-level rules (<strong>u1:</strong>) are deactivated.</li>
<li>At anytime, if another <a class="reference internal" href="#simple-rule"><span>User rule</span></a> matches, then the previous subrules
are deactivated.</li>
</ul>
<dl class="glossary docutils">
<dt id="term-scope">Scope</dt>
<dd><p class="first">The subrules of a rule are called the <strong>scope</strong> of the rule.</p>
<a class="last reference internal image-reference" href="../../../_images/dialog_scope.png"><img alt="../../../_images/dialog_scope.png" src="../../../_images/dialog_scope.png" style="width: 403px; height: 192px;" /></a>
</dd>
</dl>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(talk about animals)</span> do you have a cat or a dog?
   <span class="o">u1:</span><span class="nv">(dog)</span> is it a big dog?
     <span class="o">u2:</span><span class="nv">(yes)</span> make sure he has enough space to run
     <span class="o">u2:</span><span class="nv">(no)</span> it is so cute
   <span class="o">u1:</span><span class="nv">(cat)</span> do you live in the countryside?
     <span class="o">u2:</span><span class="nv">(yes)</span> does your cat goes outside?
        <span class="o">u3:</span><span class="nv">(yes)</span> does he hunt mouses?
     <span class="o">u2:</span><span class="nv">(no)</span> i hope your flat is big enough
   <span class="o">u1:</span><span class="nv">(none)</span> neither do I

<span class="o">u:</span><span class="nv">(talk about sport)</span> what a good idea

<span class="ow">proposal</span>: Do you want to talk about sport?
   <span class="o">u1:</span><span class="nv">(yes)</span> Cool
   <span class="o">u1:</span><span class="nv">(no)</span> OK
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; talk about animals
do you have a cat or a dog?
&gt; I have a cat
do you live in the countryside?
&gt; no
I hope your flat is big enough
&gt; Now I want to talk about sport
what a good idea
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#stayinscope-function"><span>^stayInScope</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="proposal">
<span id="id1"></span><h3>Proposal<a class="headerlink" href="#proposal" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">proposal</span>: sentence
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>sentence</em> is a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>.</li>
</ul>
<p><strong>Usage</strong></p>
<p>While rules are triggered by a <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a>, to be said, a <strong>Proposal</strong>
needs to be triggered with one of the <strong>topic progression</strong> functions:</p>
<ul class="simple">
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#previousproposal-function"><span>^previousProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>, or</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<p><strong>Activation/deactivation</strong></p>
<p>When a proposal is said, then it cannot be said again except if the proposal is
re-activated by <a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>.</p>
<p><strong>Conditions</strong></p>
<p>The <a class="reference internal" href="dialog.html#dialog-doc-topic"><span>Topic</span></a> containing the user rules must be active.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>: enu

<span class="ow">proposal</span>: take a cup and fill it with milk
<span class="ow">proposal</span>: add 3 strawberries
<span class="ow">proposal</span>: add some vanilla ice cream
<span class="ow">proposal</span>: close the cup with the lid and shake it
<span class="ow">proposal</span>: you did it! you can enjoy your milkshake

<span class="o">u:</span><span class="nv">(I want a milkshake)</span>
    ok, let&#39;s do it.
    follow my instruction and say next when you are ready for the next step.

<span class="o">u:</span><span class="nv">(next)</span> ^nextProposal
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; I want a milkshake
ok, let&#39;s do it.
follow my instruction and say next when you are ready for the next step.
&gt;next
take a cup and fill it with milk
&gt;next
add 3 strawberries
&gt;next
add some vanilla ice cream
&gt;next
close the cup with the lid and shake it
&gt;next
you did it! you can enjoy your milkshake
&gt;next
<span class="nv">(no answer)</span>
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="delimiters">
<span id="delimiter-rule"></span><h2>Delimiters<a class="headerlink" href="#delimiters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="choice">
<span id="or-rule"></span><h3>Choice: [ ]<a class="headerlink" href="#choice" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">([word1 word2 wordn])</span> answer
<span class="o">u:</span><span class="nv">(input)</span> <span class="p">[</span>word1 word2 wordn]
<span class="o">u:</span><span class="nv">([word1 word2 wordn])</span> <span class="p">[</span>word1 word2 wordn] human
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>word1</em> to <em>wordn</em> are words that could substitute with each other.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Never write [{xxx}] the dialog engine will accept it but this rule
will always match, whatever you write inside.</p>
</div>
<p><strong>Usage</strong></p>
<ul class="simple">
<li>In a <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a>: creates one rule accepting variations.</li>
<li>In a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>: if the rule is triggered several times, the words
will be used sequentially in order to create varying responses.</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">([hi hello])</span> <span class="p">[</span>hello hi] human
</pre></div>
</div>
<p>The <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> can be &#8216;hello&#8217; or &#8216;hi&#8217;.
The <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> can be &#8216;hello human&#8217; or &#8216;hi human&#8217;.
By default answers are in a sequential order.</p>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hello
hello human
&gt; hello
hi human
&gt; hi
hello human
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#first-function"><span>^first</span></a>.</li>
<li><a class="reference internal" href="#rand-function"><span>^rand</span></a>.</li>
<li><a class="reference internal" href="#repeat-function"><span>^repeat</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="phrase-delimiter">
<span id="id2"></span><h3>Phrase delimiter: &#8221; &#8220;<a class="headerlink" href="#phrase-delimiter" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">([word1 &quot;phrase 1&quot;])</span> <span class="p">[</span>&quot;phrase 2&quot; &quot;phrase 3&quot;]
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>word1</em> is a word that could substitute with <em>phrase 1</em>.</li>
<li><em>phrase 2</em> and <em>phrase 3</em> are phrases used sequentially in order to create
varying responses.</li>
</ul>
<p><strong>Usage</strong></p>
<p>Allows you to place a phrase instead of a single word in a <a class="reference internal" href="#or-rule"><span>choice []</span></a>
or an <a class="reference internal" href="#optional-delimiter"><span>optional part {}</span></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Single quotes &#8216; &#8216; do not concatenate words together.
If you need to concatenate words into a phrase, you must use double quotes &#8220;&#8221;.</p>
<p>Example:</p>
<p>u:(hello [&#8220;my mate&#8221; &#8220;my friend&#8221;]) is interpreted correctly, but</p>
<p class="last">u:(hello [&#8216;my mate&#8217; &#8216;my friend&#8217;]) is interpreted as u:(hello [my mate friend])</p>
</div>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">([&quot;hello how are you&quot; &quot;hello are you OK&quot;])</span> <span class="p">[</span>&quot;I am fine&quot; &quot;I am OK&quot;]
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hello are you OK
I am fine
&gt; hello how are you
I am OK
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="optional-part">
<span id="optional-delimiter"></span><h3>Optional part: { }<a class="headerlink" href="#optional-part" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(beginning of the sentence {optionalWord} end of the sentence)</span> answer
<span class="o">u:</span><span class="nv">(input)</span> beginning of the sentence {optionalWord} end of the sentence
<span class="o">u:</span><span class="nv">(beginning of the sentence {&quot;optional phrase&quot;} end of the sentence)</span> answer
<span class="o">u:</span><span class="nv">(input)</span> beginning of the sentence {&quot;optional phrase&quot;} end of the sentence
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>optionalWord</em> is a word that could appear or not in the <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> or the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>.</li>
<li><em>optional phrase</em> is a phrase that could appear or not in the <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> or the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>.</li>
</ul>
<p><strong>Usage</strong></p>
<p>Optional word or phrase, at the beginning, the middle or the end of a sentence.</p>
<p><strong>Conditions</strong></p>
<p>Inside a <a class="reference internal" href="#or-rule"><span>Choice: [ ]</span></a>, optional word for <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> can only be used inside a phrase:</p>
<ul class="simple">
<li><strong>Not correct</strong>: u:([chocolate milk {bread}])</li>
<li><strong>Correct</strong>: u:([chocolate milk &#8220;{white} bread&#8221;])</li>
</ul>
<p><strong>Example 1</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello {buddy} how are you)</span> hello I am fine
</pre></div>
</div>
<p><strong>Execution of Example 1</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt;hello how are you
hello I am fine
&gt;hello buddy how are you
hello I am fine
</pre></div>
</div>
<p><strong>Example 2</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hey)</span> hello {human buddy}
</pre></div>
</div>
<p><strong>Execution of Example 2</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt;hey
hello human
&gt;hey
hello buddy
&gt;hey
hello
</pre></div>
</div>
<p>In this example, each element inside of the <a class="reference internal" href="#optional-delimiter"><span>Optional part: { }</span></a> is picked
with a probability of 1/3 (corresponds to a choice: [human buddy ^empty]).</p>
<p><strong>Related rules</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#empty-rule"><span>^empty</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="special-characters">
<span id="id3"></span><h2>Special characters<a class="headerlink" href="#special-characters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="comments">
<span id="comment-in-rule"></span><h3>Comments:&nbsp;#<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre># comment
</pre></div>
</div>
<p>Comment is defined by character <em>#</em>. All the characters following <em>#</em> in the
same line will be ignored.</p>
<hr class="docutils" />
</div>
<div class="section" id="wildcard">
<span id="id4"></span><h3>Wildcard: *<a class="headerlink" href="#wildcard" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(sentence * sentence)</span> answer
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Matches any word or phrase.</p>
<p><strong>Use wildcards sparingly</strong></p>
<p>Too many wildcards can degrade performance of the automatic speech recognition.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(my name is *)</span> nice to meet you
<span class="o">u:</span><span class="nv">(I like to * a lot)</span> it sounds cool
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; my name is David
nice to meet you
&gt; I like to dance a lot
it sounds cool
&gt; I like to play tennis a lot
it sounds cool
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#input-storing"><span>Input storing: _</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="forbidden-word">
<span id="id5"></span><h3>Forbidden word: !<a class="headerlink" href="#forbidden-word" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(sentence !forbiddenWord)</span> answer
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Allows you to define a forbidden word in a <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(tell me a story)</span> OK, a new one?
<span class="o">u:</span><span class="nv">(!don&#39;t tell me a new one)</span> great, I&#39;ll tell you a new story!
<span class="o">u:</span><span class="nv">(don&#39;t tell me a new one)</span> Ok, so I&#39;ll tell you the story of Peter Pan.
</pre></div>
</div>
<p>Execution</p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; tell me a story
OK, a new one?
&gt; tell me a new one
great, I&#39;ll tell you a new story!
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="tag">
<span id="id6"></span><h3>Tag: %<a class="headerlink" href="#tag" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">proposal</span>: %tag sentence
<span class="o">u:</span><span class="nv">(input)</span> %tag answer
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Allows you to identify one or several proposal(s) or rule(s) by a tag.
Tags can be activated or deactivated. If a tag is deactivated, then the sentence
is false and won&#8217;t be said.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="ow">proposal</span>: %weather what is the weather like today?
<span class="o">u:</span><span class="nv">(tell me a story)</span> %story ok, I&#39;ll tell you the story of the three bears
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#activate-function"><span>^activate ^deactivate</span></a>,</li>
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="input-storing">
<span id="id7"></span><h3>Input storing: _<a class="headerlink" href="#input-storing" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(sentence _[word1 word2])</span> answer $1

<span class="o">u:</span><span class="nv">(sentence _~concept)</span> answer $1

<span class="o">u:</span><span class="nv">(sentence _*)</span> answer $1
</pre></div>
</div>
<p>Where:</p>
<ul>
<li><p class="first"><em>_[word1 word2]</em> is the choice of words the robot will be able to catch and reuse.</p>
</li>
<li><p class="first"><em>$1</em> is the first caught word.</p>
<p>If there are several <em>_</em>, <em>$2</em> is the second caught word, <em>$3</em> is the third, etc.
There is no limitation in variable number.</p>
</li>
<li><p class="first"><em>_~conceptName</em> allows catching any word included in a concept.
For further details, see: <a class="reference internal" href="#dialog-concept"><span>Concept call: ~</span></a>.</p>
</li>
<li><p class="first"><em>_*</em> allows catching any word said using the speech recognition.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>_* is not available for all robots and all languages,
it requires a specific remote speech recognition license.</p>
<p class="last">For further details, see: <a class="reference internal" href="../../../family/pepper_technical/languages_pep.html#remote-asr-engines"><span>Remote ASR Engine - List of supported Languages</span></a>.</p>
</div>
<p><strong>Note</strong>: giving a choice of words to recognize eases the speech recognition.</p>
</li>
</ul>
<p><strong>Usage</strong></p>
<p>Allows catching one or several words in the <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a>
and reuse it within the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> directly following.</p>
<p><strong>Tips</strong>: if you need to reuse the value elsewhere in the dialog, store it in
a <a class="reference internal" href="#dialog-variable"><span>variable</span></a>.</p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(my name is _*)</span> nice to meet you $1 $name=$1
</pre></div>
</div>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(my name is _*)</span> nice to meet you $1
<span class="o">u:</span><span class="nv">(I like _[chocolate cheese])</span> do you want to eat $1 now?
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; my name is David
nice to meet you David
&gt; I like cheese
do you want to eat cheese now?
&gt; I like chocolate
do you want to eat chocolate now?
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#wildcard"><span>Wildcard: *</span></a>.</li>
<li><a class="reference internal" href="#dialog-concept"><span>Concept call: ~</span></a>.</li>
<li><a class="reference internal" href="#dialog-variable"><span>Variable: $</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="variable">
<span id="dialog-variable"></span><h3>Variable: $<a class="headerlink" href="#variable" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre># Affect a variable
<span class="o">u:</span><span class="nv">(input)</span> answer $variableName=value

# Use a variable in a robot answer
<span class="o">u:</span><span class="nv">(input)</span> answer $variableName
</pre></div>
</div>
<p>Where:</p>
<p><em>variableName</em> is the name of the variable.</p>
<p><strong>Note</strong>: For each <a class="reference internal" href="#dialog-variable"><span>variable</span></a> <code class="docutils literal"><span class="pre">$variableName</span></code>,
an <a class="reference internal" href="#event-rule"><span>event</span></a> <code class="docutils literal"><span class="pre">e:variableName</span></code> is also available. Variable are
stored in ALMemory. <code class="docutils literal"><span class="pre">e:variableName</span></code> subscribes to ALMemory event.</p>
<p><strong>Note</strong>: $user/variable=value automatically stores in a database the value for the current user.
The current user is identified by  <a class="reference internal" href="aldialog-api.html#ALDialogProxy::openSession__i" title="ALDialogProxy::openSession"><code class="xref cpp cpp-func docutils literal"><span class="pre">ALDialogProxy::openSession</span></code></a> method called by <a class="reference internal" href="../autonomouslife.html#autonomouslife"><span>ALAutonomousLife</span></a>.</p>
<p><strong>Warning</strong>: Do not affect and read the variable in the same sentence. A variable is affected only
when the sentence has been fully said.</p>
<p><strong>Usage</strong></p>
<p>Variables cannot be used the same way in <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> or <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>. Indeed, in a
<a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a>, it is only possible to trigger a rule by testing a condition on a variable if
the associated event is declared in the input, or if a normal input is also present.</p>
<p>Variables are global, i.e. they can be used in several behaviors.</p>
<p>They don&#8217;t have a type and don&#8217;t need to be declared, they can be directly affected and used in rules.</p>
<p>They can be:</p>
<ul class="simple">
<li>set</li>
<li>used in a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a></li>
<li>used in conditions (see: <a class="reference internal" href="#condition-rule"><span>Conditions: == &gt; &lt;&gt; &lt;</span></a>).</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

   <span class="o">u:</span><span class="nv">(I want some _[chocolate cheese])</span> OK $askedFood=$1
   <span class="o">u:</span><span class="nv">(what did I ask)</span> ^first[&quot;you asked $askedFood&quot; &quot;I don&#39;t know&quot;]
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; what did I ask
I don&#39;t know
&gt; I want some chocolate
OK
&gt; what did I ask
you asked chocolate
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#first-function"><span>^first</span></a>,</li>
<li><a class="reference internal" href="#delete-function"><span>^clear</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="conditions">
<span id="condition-rule"></span><h3>Conditions: == &gt; &lt;&gt; &lt;<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre># condition on variable
<span class="o">u:</span><span class="nv">($variableName==value)</span> answer

# answer if variable&gt;value
<span class="o">u:</span><span class="nv">(input)</span> answer $variableName&gt;value

# answer if variable&lt;value
<span class="o">u:</span><span class="nv">(input)</span> answer $variableName&lt;value

# answer if variable different from value
<span class="o">u:</span><span class="nv">(input)</span> answer $variableName&lt;&gt;value

# condition on variable in human input, using an event
<span class="o">u:</span><span class="nv">(e:FrontTactilTouched $FrontTactilTouched==1)</span> answer

# condition on variable in human input
<span class="o">u:</span><span class="nv">(&quot;input $variableName==value&quot;)</span> answer

# condition on variable in answer
<span class="o">u:</span><span class="nv">(input)</span> <span class="p">[</span>&quot;answer $variableName==value&quot; &quot;another answer&quot;]
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Placed in a <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> or in a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>, a condition:</p>
<ul class="simple">
<li>triggers the rule if true,</li>
<li>blocks the rule if false.</li>
</ul>
<p>A condition based on an empty variable will be ignored.</p>
<p>The condition ordering does not matter.</p>
<p>If condition is false anywhere in quote, then the sentence in quote will not be said.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

   <span class="o">u:</span><span class="nv">(I want some _[chocolate cheese])</span> OK, you want some $1 $askedFood=$1
   <span class="o">u:</span><span class="nv">(what did I ask)</span> ^first [&quot;you asked $askedFood&quot; &quot;I don&#39;t know&quot;]
   <span class="o">u:</span><span class="nv">(can I have more)</span>
   ^first[&quot;$askedFood==chocolate sorry, too much chocolate could hurt you&quot;
   &quot;yes, please take more $askedFood&quot;]
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#first-function"><span>^first</span></a>.</p>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; I want some chocolate
OK, you want some chocolate
&gt; can I have more
sorry, too much chocolate could hurt you
&gt; I want some cheese
OK, you want some cheese
&gt; can I have more
yes, please take more cheese
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="robot-events-e-eventname">
<span id="event-rule"></span><h3>Robot events: e:eventName<a class="headerlink" href="#robot-events-e-eventname" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(e:event)</span> answer
# will answer whenever the event &quot;event&quot; is raised

<span class="o">u:</span><span class="nv">([e:event sentence])</span> answer
# will answer whenever the event &quot;event&quot; is raised or the sentence is said.

<span class="o">u:</span><span class="nv">(&quot;e:event sentence&quot;)</span> answer
# will answer whenever the event &quot;event&quot; is raised and then the sentence is said
# (the event must be raised before saying the sentence)

<span class="o">u:</span><span class="nv">(e:MyService.MySignal)</span> answer
# will answer whenever the signal &quot;MyService.MySignal&quot; is raised
</pre></div>
</div>
<p><strong>Note</strong>: For each <a class="reference internal" href="#event-rule"><span>event</span></a>, <code class="docutils literal"><span class="pre">e:eventName</span></code> a
<a class="reference internal" href="#dialog-variable"><span>variable</span></a> <code class="docutils literal"><span class="pre">$eventName</span></code> is also available.</p>
<p><strong>Note</strong>: In Choregraphe qiChat events and input/output can have the same name. If an event have the
same name than box input/output, the variable is only linked to the box and is not anymore usable with ALMemory.</p>
<p><strong>Note</strong>: Only one event can be matched at a time. If several events are raised at the same time,
other events with the same name are rejected until dialog engine answered. Other events with different
names have two seconds to be matched by dialog engine or they will be rejected.</p>
<p><strong>Note</strong>: Compatible events can be both <a class="reference internal" href="aldialog-api.html#qichat-naoqi-events"><span>ALMemory events</span></a>
or <a class="reference internal" href="#qichat-events"><span>qiChat events</span></a>  but not signals.</p>
<p><strong>Usage</strong></p>
<p>Catches an event.</p>
<p>Allows to catch:</p>
<ul class="simple">
<li>any <a class="reference internal" href="../../../naoqi-eventindex.html"><em>NAOqi Events</em></a> providing information related to
the robot: movement, battery information, face information,</li>
<li>any <a class="reference internal" href="aldialog-api.html#dialog-event-list"><span>ALDialog event list</span></a> providing
information about the Dialog engine,</li>
<li>the events raised each time a value is assigned to a
<a class="reference internal" href="dialog.html#dialog-doc-variables"><span>variable</span></a>,</li>
<li>any signal available in NAOqi services.</li>
</ul>
<p><strong>Note</strong></p>
<p><a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> cannot occur at high frequency, both data and event are merged.</p>
<p><strong>Conditions</strong></p>
<p>The subscribe will only occur when the topic is activated.
The unsubscribe will occur when the topic is deactivated.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(be my puppet)</span> ok, touch my leg or ask me
<span class="o">u:</span><span class="nv">([e:LeftBumperPressed &quot;move this leg&quot;])</span> ok I move the left leg
<span class="o">u:</span><span class="nv">(e:LeftBumperPressed &quot;light this leg&quot;)</span> ok I turn leds on left leg
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt;be my puppet
ok, touch my leg or ask me
&gt;(user touch the left bumper)
ok I move the left leg
&gt;(user touch the left bumper) light this leg
ok I turn leds on left leg
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="concept-call">
<span id="dialog-concept"></span><h3>Concept call: ~<a class="headerlink" href="#concept-call" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(~conceptName)</span> answer
<span class="o">u:</span><span class="nv">(input)</span> answer ~conceptName
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>A <strong>Concept</strong> can be used both in <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> or <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> to
replace a list of item previously declared.</p>
<ul class="simple">
<li>In <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a>, the rule will match if anyone of the items of the list
is recognized.</li>
<li>In <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>, one item of the list will be said.
Each call of the rule will call sequentially another item of the list.</li>
</ul>
<p><strong>Conditions</strong></p>
<p>the <strong>Concept</strong> must be previously defined.</p>
<p>To define a concept, see: <a class="reference internal" href="#dialog-concept-def"><span>concept</span></a> and
<a class="reference internal" href="#dialog-dynamic-def"><span>dynamic</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

   <span class="ow">concept</span>:(want) [want need desire like]
   <span class="ow">concept</span>:(alcohol) [beer vodka &quot;red wine&quot;]
   <span class="ow">concept</span>:(child-drink) [&quot;orange juice&quot; milk]
   <span class="ow">concept</span>:(drink) [~alcohol ~child-drink]

   <span class="o">u:</span> <span class="nv">(what do you do)</span> I can help people with drinks

   <span class="o">u:</span><span class="nv">(I ~want to drink)</span> what you ~want to drink?
        <span class="o">u1:</span><span class="nv">(* _~drink)</span> do you want me to search $1 for you?
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; what do you do
I can help people with drinks
&gt; I need to drink
what do you want to drink?
&gt; I want red wine
do you want me to search red wine for you?
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#concept-enumerate"><span>^enumerate</span></a>.</li>
<li><a class="reference internal" href="#concept-size"><span>^size</span></a>.</li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="forbidden-characters">
<h2>Forbidden characters<a class="headerlink" href="#forbidden-characters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="forbidden-characters-in-human-input">
<h3>Forbidden characters in Human input<a class="headerlink" href="#forbidden-characters-in-human-input" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Type only the words to be recognized.</li>
<li>Do not use any punctuation mark.</li>
<li>Do not use any special characters, for example:<ul>
<li>instead of &#8216;$&#8217;, type: &#8216;dollar&#8217;</li>
<li>instead of &#8216;.&#8217;, type: &#8216;dot&#8217;</li>
</ul>
</li>
<li>Apostrophe ( &#8216; ) is allowed but not the typographic apostrophe ( ’ ).</li>
</ul>
<p><strong>Japanese only</strong>:</p>
<ul class="simple">
<li>speech recognition does not support Fullwidth numbers
[０ １ ２ ３ ４ ５ ６ ７ ８ ９].
Use Halfwidth numbers [0 1 2 3 4 5 6 7 8 9] instead.</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(have you a dollar for me)</span> No, sorry, I have no pocket!
<span class="o">u:</span><span class="nv">(I&#39;m rich)</span> good for you. Are you happy?
</pre></div>
</div>
</div>
<div class="section" id="forbidden-characters-in-robot-output">
<h3>Forbidden characters in Robot output<a class="headerlink" href="#forbidden-characters-in-robot-output" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>like all <a class="reference internal" href="#special-characters"><span>Special characters</span></a>, $ is a reserved word, type dollar instead.</li>
<li>warning: the character &#8216;.&#8217; is a ponctuaction character, therefore, the robot will not read it:<ul>
<li>Instead of &#8216;toto.png&#8217;, type: &#8216;toto dot png&#8217;</li>
</ul>
</li>
<li>Apostrophe ( &#8216; ) is allowed but not the typographic apostrophe ( ’ ).</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(have you a dollar for me)</span> No, sorry, I have no pocket!
<span class="o">u:</span><span class="nv">(I&#39;m rich)</span> good for you. Are you happy?
</pre></div>
</div>
</div>
</div>
<div class="section" id="rule-functions-and-properties">
<span id="rule-functions"></span><h2>Rule functions and properties<a class="headerlink" href="#rule-functions-and-properties" title="Permalink to this headline">¶</a></h2>
<div class="section" id="activate-deactivate">
<span id="activate-function"></span><h3>^activate ^deactivate<a class="headerlink" href="#activate-deactivate" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer ^deactivate(tag)
<span class="o">u:</span><span class="nv">(input)</span> answer ^activate(tag)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p><strong>^deactivate</strong> function deactivates a tag, <strong>^activate</strong> function reactivates a tag.</p>
<p>If a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> contains a deactivated tag, this <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>
cannot be triggered.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction()
<span class="ow">language</span>: enu

<span class="ow">proposal</span>: %greeting1 hello
<span class="ow">proposal</span>: nice to meet you
<span class="o">u:</span><span class="nv">(hello)</span> hello ^deactivate(greeting1)
<span class="o">u:</span><span class="nv">(say something)</span> ^nextProposal
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; Hello
Hello
&gt; say something
nice to meet you
</pre></div>
</div>
<hr class="docutils" />
<blockquote>
<div></div></blockquote>
</div>
<div class="section" id="break">
<span id="break-function"></span><h3>^break<a class="headerlink" href="#break" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(Input)</span> Answer1 ^break answer2
</pre></div>
</div>
<p><strong>Effect</strong></p>
<p>Forces dialog engine to re-evaluate the rest of the sentence. Useful when data you want to say may
change between the beginning and the end of a sentence.
Dialog engine automatically re-evaluates data after:</p>
<ul class="simple">
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a></li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~break()
<span class="ow">language</span>: frf

<span class="o">u:</span><span class="nv">(what is your position)</span> my position after this sentence is ^break ^call(ALRobotPosture.getPosture())
c1:(_*) $1
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="clear">
<span id="delete-function"></span><h3>^clear<a class="headerlink" href="#clear" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> ^clear(variableName)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Clears a variable. A cleared variables cannot be said. A sentence with cleared
variable cannot be said. A condition with cleared variable is always false.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(my name is _*)</span> nice to meet you $name=$1
<span class="o">u:</span><span class="nv">(what is my name)</span> ^first[&quot;your name is $name&quot; &quot;I don&#39;t know&quot;]
   <span class="o">u1:</span><span class="nv">(no)</span> OK ^clear(name)
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; my name is David
nice to meet you
&gt; what is my name
your name is David
&gt; no
OK
&gt; what is my name
I don&#39;t know
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#first-function"><span>^first</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="empty">
<span id="empty-rule"></span><h3>^empty<a class="headerlink" href="#empty" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> ^empty
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Used when the robot should not answer.</p>
<p>Tip: can be used inside a <a class="reference internal" href="#or-rule"><span>Choice: [ ]</span></a>, e.g. the robot does not answer immediately
to a <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> but only the second time.</p>
<p><strong>Warning</strong></p>
<p>Do not use empty string &#8220;&#8221; for this purpose: empty strings are skipped.</p>
<p><strong>Example 1</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~example1()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello)</span> <span class="p">[</span>^empty &quot;Hi human&quot;]

#Warning :
#u:(hello) [&quot;&quot; &quot;Hi human&quot;] will not work the same way, as &quot;&quot; are skipped.
</pre></div>
</div>
<p><strong>Execution of Example 1</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt;hello
<span class="nv">(no robot output)</span>
&gt;hello
Hi human
</pre></div>
</div>
<p><strong>Example 2</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~example2()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello)</span> ^goto(tag)
<span class="o">u:</span><span class="nv">(test)</span> ^empty
<span class="o">u:</span><span class="nv">(^empty)</span> %tag &quot;Hi human&quot;
</pre></div>
</div>
<p><strong>Execution of Example 2</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt;hello
Hi human
&gt;test
<span class="nv">(no robot output)</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="enumerate">
<span id="concept-enumerate"></span><h3>^enumerate<a class="headerlink" href="#enumerate" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>u:(input) ^enumerate(~conceptName)
u:(input) ^enumerate(~conceptName, 2)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Enumerates all the elements of a static or dynamic concept.</p>
<p>A second parameter can be used to limit the number of enumerated elements.
Calling several time the function will move forward in the concept.</p>
<p><strong>Example</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>topic: ~introduction ()
language:enu

concept:(alcohols) [beer &quot;[red white] wine&quot;]
u:(what are your drinks) I have ^enumerate(~alcohols)
u:(enumerate your drinks) I have ^enumerate(~alcohols, 2)
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>&gt; what are your drinks
I have beer red wine white wine
&gt; enumerate your drinks
I have beer red wine
&gt; enumerate your drinks
I have white wine
&gt; enumerate your drinks
I have beer red wine
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#concept-size"><span>^size</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="exist-notexist">
<span id="exist-function"></span><h3>^exist ^notExist<a class="headerlink" href="#exist-notexist" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~exist()
<span class="ow">language</span>: enu
<span class="o">u:</span><span class="nv">(hello)</span> <span class="p">[</span>&quot;^exist(42) the variable exist&quot; &quot;^notExist(42) the variable doesn&#39;t exist $42=1&quot;]
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>A sentence that contains ^exist won&#8217;t be said if the variable parameter does not
exist or is an empty string.</p>
<hr class="docutils" />
</div>
<div class="section" id="first">
<span id="first-function"></span><h3>^first<a class="headerlink" href="#first" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> ^first [answer1 answer2]

# Inside a choice, requires quotes
<span class="o">u:</span><span class="nv">(input)</span>  <span class="p">[</span>answer1 &quot;^first [answer2 answer3]&quot;]
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>When added before a <a class="reference internal" href="#or-rule"><span>Choice: [ ]</span></a> in the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> part,
instead of using each answer in turn, the interpreter always use the first
valid <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>.</p>
<p>A valid <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> is an answer:</p>
<ul class="simple">
<li>without any condition nor non-affected variable,</li>
<li>including affected variable(s),</li>
<li>including a condition tested as true.</li>
</ul>
<p>Using a non-affected variable in a robot output will make the rule invalid, i.e.
the rule will not be said at all.</p>
<p>To avoid this situation, use the function ^first before a choice [ ].</p>
<p>This function tries to say the first valid output. If the first element of the
choice is invalid because it contains a non-affected variable, it will try the
second element, and so on.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(my name is David)</span> nice to meet you David $name=David
<span class="o">u:</span><span class="nv">(my name is Paul)</span> nice to meet you Paul $name=Paul
<span class="o">u:</span><span class="nv">(what is my name)</span> ^first[&quot;your name is $name&quot; &quot;I don&#39;t know&quot;]
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; what is my name
I don&#39;t know
&gt; my name is David
nice to meet you David
&gt; what is my name
your name is David
</pre></div>
</div>
<p>For further details, see : <a class="reference internal" href="#condition-rule"><span>Conditions: == &gt; &lt;&gt; &lt;</span></a>.</p>
<hr class="docutils" />
</div>
<div class="section" id="goto">
<span id="goto-function"></span><h3>^goto<a class="headerlink" href="#goto" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input1)</span> %tag Answer
<span class="o">u:</span><span class="nv">(input2)</span> ^goto(tag)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The <strong>^goto</strong> function allows you to:</p>
<ul class="simple">
<li>jump to a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> (in a user rule or an activated proposal)
containing a specific <a class="reference internal" href="#tag"><span>tag</span></a>.</li>
<li>It can also be used to declare two <a class="reference internal" href="dialog.html#human-input"><span>Human inputs</span></a> as equivalent.</li>
<li>To jump to a deactivated <a class="reference internal" href="#proposal"><span>Proposal</span></a>, use <a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>.</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello how are you)</span> hello ^goto(how)
<span class="o">u:</span><span class="nv">(how you are)</span> %how I&#39;m fine
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; how are you
I&#39;m fine
&gt; hello how are you
hello I&#39;m fine
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#previousproposal-function"><span>^previousProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="gotorandom">
<span id="gotorandom-function"></span><h3>^gotoRandom<a class="headerlink" href="#gotorandom" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> ^gotoRandom(tag)
<span class="ow">proposal</span>: %tag answer1
<span class="ow">proposal</span>: %tag answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The <strong>^gotoRandom</strong> function is identical to <a class="reference internal" href="#goto-function"><span>^goto</span></a> except if the
tag is used in several rules, it will chose one randomly.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello)</span> ^gotoRandom(hi)
<span class="ow">proposal</span>: %hi hello
<span class="ow">proposal</span>: %hi welcome
<span class="ow">proposal</span>: %hi hey
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hello
hey
&gt; hello
hello
&gt; hello
welcome
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#topictagreactivate-function"><span>^topicTagReactivate</span></a>,</li>
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#previousproposal-function"><span>^previousProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="gotoreactivate">
<span id="gotoreactivate-function"></span><h3>^gotoReactivate<a class="headerlink" href="#gotoreactivate" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">proposal</span>: %tag Answer
<span class="o">u:</span><span class="nv">(input)</span> ^gotoReactivate(tag)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The <strong>^gotoReactivate</strong> function allows to jump , inside the same topic, to a deactivated <a class="reference internal" href="#proposal"><span>Proposal</span></a>.
To jump to a deactivated <a class="reference internal" href="#proposal"><span>Proposal</span></a> from another topic, use <a class="reference internal" href="#topictagreactivate-function"><span>^topicTagReactivate</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="ow">proposal</span>: %love I love you
<span class="o">u:</span><span class="nv">(do you love me)</span> yes, ^gotoReactivate(love)
<span class="o">u:</span><span class="nv">(are you sure)</span> sure, ^gotoReactivate(love)
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>I love you
&gt; do you love me
yes, I love you
&gt; are you sure
sure, I love you
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#previousproposal-function"><span>^previousProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="topictagreactivate">
<span id="topictagreactivate-function"></span><h3>^topicTagReactivate<a class="headerlink" href="#topictagreactivate" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">proposal</span>: %tag Answer
<span class="o">u:</span><span class="nv">(input)</span> ^topicTagReactivate(topic,tag)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The <strong>^topicTagReactivate</strong> function allows you to jump to a deactivated
<a class="reference internal" href="#proposal"><span>Proposal</span></a> from another topic and reactivate it.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#previousproposal-function"><span>^previousProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
</div>
<div class="section" id="topicrandom">
<span id="topicrandom-function"></span><h3>^topicRandom<a class="headerlink" href="#topicrandom" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">proposal</span>: %tag Answer
<span class="o">u:</span><span class="nv">(input)</span> ^topicRandom
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The <strong>^topicRandom</strong> function allows you to jump to an activated <a class="reference internal" href="#proposal"><span>Proposal</span></a> among activated topics.
If no proposal are available, function has no effect and event Dialog/NothingToSay is raised.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#previousproposal-function"><span>^previousProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="nextproposal">
<span id="nextproposal-function"></span><h3>^nextProposal<a class="headerlink" href="#nextproposal" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer ^nextProposal
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The function <strong>^nextProposal</strong> says the first activated proposal in the
<a class="reference internal" href="dialog.html#dialog-doc-topic"><span>Topic</span></a> which has the <a class="reference internal" href="dialog.html#dialog-doc-focus"><span>Focus</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(hi)</span> hello ^nextProposal

<span class="ow">proposal</span>: how are you?
  <span class="o">u1:</span><span class="nv">(I&#39;m fine)</span> cool!
  <span class="o">u1:</span><span class="nv">(I&#39;m tired)</span> oh, you should take a nap

<span class="ow">proposal</span>: again!
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hi
hello how are you?
&gt; I&#39;m tired
oh, you should take a nap
&gt; hi
hello again!
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="play">
<span id="play-function"></span><h3>^play<a class="headerlink" href="#play" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>: enu
<span class="o">u:</span><span class="nv">(play * sound)</span> ^play(sound)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>^play is a beta function that can be removed at any version. ^play allows playing
a sound with audio device soundSet instead of animated speech.
See <a class="reference internal" href="../../audio/alaudiodevice.html#alaudiodevice"><span>ALAudioDevice</span></a>.</p>
<hr class="docutils" />
</div>
<div class="section" id="previousproposal">
<span id="previousproposal-function"></span><h3>^previousProposal<a class="headerlink" href="#previousproposal" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer ^previousProposal
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The function <strong>^previousProposal</strong> repeats the <a class="reference internal" href="#proposal"><span>Proposal</span></a> said previously
to the last in the same <a class="reference internal" href="dialog.html#dialog-doc-topic"><span>Topic</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(hi)</span> hello ^nextProposal

<span class="ow">proposal</span>: how are you?
  <span class="o">u1:</span><span class="nv">(I&#39;m fine)</span> cool!
  <span class="o">u1:</span><span class="nv">(I&#39;m tired)</span> oh ^nextProposal

<span class="ow">proposal</span>: do you want some tea?
   <span class="o">u1:</span><span class="nv">(yes)</span> I&#39;m bringing you a cup of tea.
   <span class="o">u1:</span><span class="nv">(no)</span> okay, ^nextProposal

<span class="ow">proposal</span>: what about some coffee?
   <span class="o">u1:</span><span class="nv">(yes)</span> I&#39;m bringing you a cup of coffee.
   <span class="o">u1:</span><span class="nv">(no)</span> okay, maybe you should just take a nap.

<span class="o">u:</span><span class="nv">(what did you say before)</span> ^previousProposal
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hi
hello how are you?
&gt; I&#39;m tired
do you want some tea?
&gt; no
OK, what about coffee?
&gt; what did you say before
do you want some tea?
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#sameproposal-function"><span>^sameProposal</span></a>,</li>
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="private">
<span id="private-userrules"></span><h3>^private<a class="headerlink" href="#private" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span>^private(Input) Answer
</pre></div>
</div>
<p><strong>Effect</strong></p>
<p>Apply a private status to a rule.
A private <strong>user rule</strong> is only active when
its corresponding topic has the <a class="reference internal" href="dialog.html#dialog-doc-focus"><span>Focus</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~music ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(I want to talk about music)</span> OK!
<span class="o">u:</span>^private(what are we talking about) we are talking about music
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; I want to talk about music
OK!
&gt; what are we talking about
we are talking about music
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="rand">
<span id="rand-function"></span><h3>^rand<a class="headerlink" href="#rand" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> ^rand[answer1 answer2]
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Can be added before a <a class="reference internal" href="#or-rule"><span>choice []</span></a> in the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>.</p>
<p>Instead of using each answer sequentially, the interpreter will choose randomly
a valid <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>.</p>
<p>A valid <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> is:</p>
<ul class="simple">
<li>an answer including a condition tested as true or</li>
<li>an answer including no condition at all.</li>
</ul>
<p>Rand function in a choice needs to be inside quote.</p>
<p>For further details, see: <a class="reference internal" href="#condition-rule"><span>Conditions: == &gt; &lt;&gt; &lt;</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(hello)</span> ^rand[hello hi &quot;what&#39;s up&quot; &quot;hey there&quot;]
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="repeat">
<span id="repeat-function"></span><h3>^repeat<a class="headerlink" href="#repeat" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(^repeat[word1 word2 word3])</span> answer
</pre></div>
</div>
<p><strong>Note</strong>: Repeat allows you to use words or sentences from one to ten times.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This function is tricky. Avoid to start your first interaction with repeat.
Avoid to use Wildcard * in repeat.</p>
</div>
<p><strong>Usage</strong></p>
<p>Allows a free combination of listed words.</p>
<p>The <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> is recognized if one or several word(s) among the list
are said, regardless of the order.</p>
<hr class="docutils" />
</div>
<div class="section" id="sameproposal">
<span id="sameproposal-function"></span><h3>^sameProposal<a class="headerlink" href="#sameproposal" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer ^sameProposal
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>The function <strong>^sameProposal</strong> repeats the last <a class="reference internal" href="#proposal"><span>proposal</span></a>
said in the same topic.</p>
<p><strong>Best practices</strong></p>
<p>When using <strong>^sameProposal</strong>, always make the robot say something like
&#8216;Ok I&#8217;ll repeat&#8217;, &#8216;No problem,&#8217; so that the user knows what to expect.
It also makes the repetition clearer.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(hi)</span> hello ^nextProposal

<span class="ow">proposal</span>: how are you?
  <span class="o">u1:</span><span class="nv">(I&#39;m fine)</span> cool!
  <span class="o">u1:</span><span class="nv">(I&#39;m tired)</span> oh ^nextProposal

<span class="ow">proposal</span>: do you want some coffee?
   <span class="o">u1:</span><span class="nv">(yes)</span> I&#39;m bringing you a cup of coffee.
   <span class="o">u1:</span><span class="nv">(no)</span> okay, maybe you should just take a nap.
   <span class="o">u1:</span><span class="nv">(can you repeat please)</span> Ok I&#39;ll repeat. ^sameProposal
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hi
hello how are you?
&gt; I&#39;m tired
do you want some coffee?
&gt; can you repeat please
Ok I&#39;ll repeat. Do you want some coffee?
&gt; yes
I&#39;m bringing you a cup of coffee.
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#nextproposal-function"><span>^nextProposal</span></a>,</li>
<li><a class="reference internal" href="#previousproposal-function"><span>^previousProposal</span></a>,</li>
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#topictag-function"><span>^topicTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="size">
<span id="concept-size"></span><h3>^size<a class="headerlink" href="#size" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>u:(input) ^size(~conceptName)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Returns the number of elements in a static of dynamic concept.</p>
<p><strong>Example</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>topic: ~introduction ()
language:enu

dynamic:cocktails
concept:(alcohols) [beer &quot;[red white] wine&quot; ~cocktails]
u:(how many drinks do you have) I have ^size(~alcohols)
u:(do you have any cocktails) $size=&quot;^size(~cocktails)&quot; [&quot;$size==0 no&quot; &quot;yes I have $size cocktails&quot;]
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>&gt; how many drinks do you have
I have 3
&gt; do you have any cocktails
no
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#concept-enumerate"><span>^enumerate</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="stayinscope">
<span id="stayinscope-function"></span><h3>^stayInScope<a class="headerlink" href="#stayinscope" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer
   <span class="o">u1:</span><span class="nv">(input1)</span> answer ^stayInScope
   <span class="o">u1:</span><span class="nv">(input2)</span> answer
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Used in a rule or subrule to stay in the current scope when the corresponding
rule has matched.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(let&#39;s talk about animals)</span> do you have a cat or a dog?
   <span class="o">u1:</span><span class="nv">(I {also} have a dog)</span> dogs are funny ^stayInScope
   <span class="o">u1:</span><span class="nv">(I {also} have a cat)</span> I once met a cat  ^stayInScope
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; let&#39;s talk about animals
do you have a cat or a dog?
&gt; I have a dog
I love dogs
&gt; I also have a cat
I once met a cat
</pre></div>
</div>
</div>
</div>
<div class="section" id="user-info-methods">
<h2>User info methods<a class="headerlink" href="#user-info-methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="getuserinfo">
<span id="getuserinfo-function"></span><h3>^getUserInfo<a class="headerlink" href="#getuserinfo" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>#get information
<span class="o">u:</span><span class="nv">(input)</span> ^getUserInfo(dataName)
</pre></div>
</div>
<p>Where:</p>
<p><em>dataName</em> is the name of the data you want to get the value.</p>
<p><strong>Note</strong>: The data you will get are those about the focused user (the one with
which the robot is speaking) from <a class="reference internal" href="../../core/aluserinfo.html#aluserinfo"><span>ALUserInfo</span></a> in the user-info domain.</p>
<p><strong>Usage</strong></p>
<p>Placed in a <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> or in a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> it will be replaced
by the value of the data. If the data has not been set the rule will be blocked.
If the data has not been set anywhere in a quoted expression, then the expression will not be said.
You can check that a data has a value with the function <a class="reference internal" href="#hasuserinfo-function"><span>^hasUserInfo</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(Hi)</span> Hi ^first[&quot;^getUserInfo(name), how are you ?&quot; &quot;what&#39;s your name&quot;]
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>#if the focused user has a name, let&#39;s say Albert
&gt; Hi
Hi Albert, how are you ?
#if the focused user doesn&#39;t have a name
&gt; Hi
Hi what&#39;s your name ?
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="setuserinfo">
<span id="setuserinfo-function"></span><h3>^setUserInfo<a class="headerlink" href="#setuserinfo" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>#get information
<span class="o">u:</span><span class="nv">(input)</span> ^setUserInfo(dataName , value)
</pre></div>
</div>
<p>Where:</p>
<p><em>dataName</em> is the name of the data you want to set the value.
<em>value</em> is the value.</p>
<p><strong>Note</strong>: The data you will set are those about the focused user
(the one with which the robot is speaking) from <a class="reference internal" href="../../core/aluserinfo.html#aluserinfo"><span>ALUserInfo</span></a> in the user-info domain.
The data is stored in a long term memory, it is persistant after engine restart.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">concept</span>:(name) [maupassant farugia bill marceau]
<span class="o">u:</span><span class="nv">(my name is _~name)</span> i will remember your name ^setUserInfo(name , $1)
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="hasuserinfo">
<span id="hasuserinfo-function"></span><h3>^hasUserInfo<a class="headerlink" href="#hasuserinfo" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>#Check if an information about the focused user exists or not
<span class="o">u:</span><span class="nv">(input)</span> ^first[&quot;^hasUserInfo(dataName) the dataName has a value&quot; &quot;the dataName
doesn&#39;t have any value&quot;]
</pre></div>
</div>
<p>Where:</p>
<p><em>dataName</em> is the name of the data you want to check</p>
<p><strong>Note</strong>: The data you check are those about the focused user, the one with which
the robot is speaking, from <a class="reference internal" href="../../core/aluserinfo.html#aluserinfo"><span>ALUserInfo</span></a> in the user-info domain.</p>
<p><strong>Usage</strong></p>
<p>Placed in a <a class="reference internal" href="dialog.html#human-input"><span>Human input</span></a> or in a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a>:</p>
<ul class="simple">
<li>triggers the rule if true,</li>
<li>blocks the rule if false.</li>
</ul>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(What can we do)</span> ^first[&quot;^hasUserInfo(favoriteGames) Let&#39;s play a game !&quot; &quot;I
can dance for you !&quot;]
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>#Let&#39;s suppose that the focused user likes games
&gt; What can we do
Let&#39;s play game
#Let&#39;s suppose that the focused user like games
&gt; What can we do
I can dance for you
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="removeuserinfo">
<span id="removeuserinfo-function"></span><h3>^removeUserInfo<a class="headerlink" href="#removeuserinfo" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>#get information
<span class="o">u:</span><span class="nv">(input)</span> ^removeUserInfo(dataName)
</pre></div>
</div>
<p>Where:</p>
<p><em>dataName</em> is the name of the data you want to remove.</p>
<p><strong>Note</strong>: The data you will remove are those about the focused user (the one with
which the robot is speaking) from <a class="reference internal" href="../../core/aluserinfo.html#aluserinfo"><span>ALUserInfo</span></a> in the user-info domain.</p>
<p><strong>Usage</strong></p>
<p>Removing a data about a user.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(forget my name)</span> ok ^removeUserInfo(dataName)
<span class="o">u:</span><span class="nv">(what is my name)</span> ^first[&quot;Your name is ^getUserInfo(dataName)&quot; &quot;I don&#39;t
know your name&quot;]
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>#if the focused user has a name Rémy
&gt; what is my name
Your name is Rémy
&gt; forget my name
ok
&gt; what is my name
I don&#39;t know your name
</pre></div>
</div>
</div>
</div>
<div class="section" id="call-functions-and-program-logic">
<h2>Call functions and program logic<a class="headerlink" href="#call-functions-and-program-logic" title="Permalink to this headline">¶</a></h2>
<div class="section" id="script">
<span id="script-function"></span><h3>%script<a class="headerlink" href="#script" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~addition()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(1 + 2)</span> result is
%script
print 1+2
%script
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Calls python code from QiChat.</p>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; 1+2
result is 3
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="switchfocus">
<span id="switchfocus-function"></span><h3>^switchFocus<a class="headerlink" href="#switchfocus" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~addition()
<span class="ow">language</span>: enu

# we suppose an application weather is installed on robot.
<span class="o">u:</span><span class="nv">(start weather)</span> ^switchFocus(weatherApplication/weatherBehavior)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Stops dialog engine and runs a <strong>Behavior</strong> identified by application <strong>uuid</strong> and <strong>Behavior</strong> name.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>If the behavior is at the root of the application, then switch focus parameter is ^switchFocus(uuid/.)</li>
<li>Life needs to be started.</li>
</ul>
</div>
<hr class="docutils" />
</div>
<div class="section" id="call">
<span id="call-function"></span><h3>^call<a class="headerlink" href="#call" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~call()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(Input)</span> Answer1 ^call(Method())
c1:(_*) $1  # say any result from call
c1:(result1) Answer2
   <span class="o">u2:</span><span class="nv">(Input)</span> Answer3
c1:(result2) Answer4
   <span class="o">u2:</span><span class="nv">(Input)</span> Answer5
</pre></div>
</div>
<p>Where:</p>
<ul>
<li><p class="first"><strong>c1:</strong> is a subrule related to the result of <a class="reference internal" href="#call-function"><span>^call</span></a>,</p>
</li>
<li><p class="first"><strong>u2:</strong> is a subrule in the scope of c1.</p>
<p><strong>Warning</strong>: it is not possible to mix c1 and u1. It is necessary to create a scope for the answers
if c1 is matched.</p>
</li>
</ul>
<p><strong>Effect</strong></p>
<p>Calls a NAOqi method and manages the result.</p>
<p><strong>Note</strong>: the evaluation of the call is always performed at the beginning of the sentence.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~call()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(tell me what is your position)</span> Sure. ^call(ALRobotPosture.getPosture())
c1:(_*) $1
c1:(crouch) My position is crouch.
   <span class="o">u2:</span><span class="nv">(ok)</span> What about you ?
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre># robot is sit
&gt; tell me what is your position
Sure. sit
# robot is crouch
&gt; tell me what is your position
Sure. My position is crouch.
&gt; ok
What about you ?
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="scall">
<span id="scall-function"></span><h3>^sCall<a class="headerlink" href="#scall" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~call()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(go to rest)</span> I am going to rest now. ^sCall(ALRobotPosture.getPosture()) I am in rest position now.
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Allows to call a Naoqi method and manages the result. The evaluation of the call is performed at the
sCall position in the sentence. It will interrupt the text to speech.</p>
<hr class="docutils" />
</div>
<div class="section" id="pcall">
<span id="pcall-function"></span><h3>^pCall<a class="headerlink" href="#pcall" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~pcall()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(go to rest)</span> ok ^pCall(ALMotion.rest()) I am going to rest.
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Allows to make an asynchronous call of a Naoqi method.</p>
<hr class="docutils" />
</div>
<div class="section" id="mode">
<span id="mode-function"></span><h3>^mode<a class="headerlink" href="#mode" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 &quot;^mode(body_language_mode) word1 word2...&quot; answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Changes the body language mode for the current text.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<hr class="docutils" />
</div>
<div class="section" id="run">
<span id="run-function"></span><h3>^run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^run(animation_full_name) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Suspends the speech, runs an animation and resumes the speech.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#start-function"><span>^start</span></a>,</li>
<li><a class="reference internal" href="#stop-function"><span>^stop</span></a>,</li>
<li><a class="reference internal" href="#wait-function"><span>^wait</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="runtag">
<span id="runtag-function"></span><h3>^runTag<a class="headerlink" href="#runtag" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^runTag(tag_name) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Suspends the speech, runs an animation which has the mentioned tag and resumes the speech.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#starttag-function"><span>^startTag</span></a>,</li>
<li><a class="reference internal" href="#stoptag-function"><span>^stopTag</span></a>,</li>
<li><a class="reference internal" href="#waittag-function"><span>^waitTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="runsound">
<span id="runsound-function"></span><h3>^runSound<a class="headerlink" href="#runsound" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^runSound(soundSet/soundFile) answer2
<span class="o">u:</span><span class="nv">(input)</span> answer1 ^runSound(soundSet/soundFile, soundVolume) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Suspends the speech, plays a sound and resumes the speech.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#startsound-function"><span>^startSound</span></a>,</li>
<li><a class="reference internal" href="#stopsound-function"><span>^stopSound</span></a>,</li>
<li><a class="reference internal" href="#waitsound-function"><span>^waitSound</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="start">
<span id="start-function"></span><h3>^start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^start(behavior) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Starts behaviors or animations.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#run-function"><span>^run</span></a>,</li>
<li><a class="reference internal" href="#stop-function"><span>^stop</span></a>,</li>
<li><a class="reference internal" href="#wait-function"><span>^wait</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="starttag">
<span id="starttag-function"></span><h3>^startTag<a class="headerlink" href="#starttag" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^startTag(tag_name) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Starts an animation which has the mentioned tag.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#runtag-function"><span>^runTag</span></a>,</li>
<li><a class="reference internal" href="#stoptag-function"><span>^stopTag</span></a>,</li>
<li><a class="reference internal" href="#waittag-function"><span>^waitTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="startsound">
<span id="startsound-function"></span><h3>^startSound<a class="headerlink" href="#startsound" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^startSound(soundSet/soundFile) answer2
<span class="o">u:</span><span class="nv">(input)</span> answer1 ^startSound(^startSound(soundSet/soundFile, soundVolume)) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Plays a sound in background.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#runsound-function"><span>^runSound</span></a>,</li>
<li><a class="reference internal" href="#stopsound-function"><span>^stopSound</span></a>,</li>
<li><a class="reference internal" href="#waitsound-function"><span>^waitSound</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="stop">
<span id="stop-function"></span><h3>^stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^stop(behavior) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Stops a running behavior or an animation.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#run-function"><span>^run</span></a>,</li>
<li><a class="reference internal" href="#start-function"><span>^start</span></a>,</li>
<li><a class="reference internal" href="#wait-function"><span>^wait</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="stoptag">
<span id="stoptag-function"></span><h3>^stopTag<a class="headerlink" href="#stoptag" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^stopTag(tag_name) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Stops a running animation which has the mentioned tag.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#runtag-function"><span>^runTag</span></a>,</li>
<li><a class="reference internal" href="#starttag-function"><span>^startTag</span></a>,</li>
<li><a class="reference internal" href="#waittag-function"><span>^waitTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="stopsound">
<span id="stopsound-function"></span><h3>^stopSound<a class="headerlink" href="#stopsound" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^stopSound(soundSet/soundFile) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Stops a sound.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#runsound-function"><span>^runSound</span></a>,</li>
<li><a class="reference internal" href="#startsound-function"><span>^startSound</span></a>,</li>
<li><a class="reference internal" href="#waitsound-function"><span>^waitSound</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="wait">
<span id="wait-function"></span><h3>^wait<a class="headerlink" href="#wait" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^wait(animation) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Waits until a running behavior or an animation has finished.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<ul class="simple">
<li><a class="reference internal" href="#run-function"><span>^run</span></a>,</li>
<li><a class="reference internal" href="#start-function"><span>^start</span></a>,</li>
<li><a class="reference internal" href="#stop-function"><span>^stop</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="waittag">
<span id="waittag-function"></span><h3>^waitTag<a class="headerlink" href="#waittag" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^waitTag(tag_name) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Suspends the speech, waits for the end of the animation which has the mentioned
tag and resumes the speech.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<ul class="simple">
<li><a class="reference internal" href="#runtag-function"><span>^runTag</span></a>,</li>
<li><a class="reference internal" href="#starttag-function"><span>^startTag</span></a>,</li>
<li><a class="reference internal" href="#stoptag-function"><span>^stopTag</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="waitsound">
<span id="waitsound-function"></span><h3>^waitSound<a class="headerlink" href="#waitsound" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(input)</span> answer1 ^waitSound(soundSet/soundFile) answer2
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Suspends the speech, waits for the end of the sound and resumes the speech.</p>
<p>For further details, see <a class="reference internal" href="../../audio/alanimatedspeech.html#annotated-text"><span>ALAnimatedSpeech: Annotated Text</span></a>.</p>
<ul class="simple">
<li><a class="reference internal" href="#runsound-function"><span>^runSound</span></a>,</li>
<li><a class="reference internal" href="#startsound-function"><span>^startSound</span></a>,</li>
<li><a class="reference internal" href="#stopsound-function"><span>^stopSound</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="topic-properties">
<span id="topic-functions"></span><h2>Topic properties<a class="headerlink" href="#topic-properties" title="Permalink to this headline">¶</a></h2>
<div class="section" id="notinembeddedasr">
<span id="notinembeddedasr-function"></span><h3>^notInEmbeddedASR<a class="headerlink" href="#notinembeddedasr" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ^notInEmbeddedASR ()
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Prevents the automatic loading of the rules in the speech recognition engine.</p>
<p>By default, the <strong>user rules</strong> contained in a topic are loaded into the embedded
speech recognition engine.
If <strong>^notInEmbeddedASR</strong> property is used, none of the <strong>user rules</strong> are
loaded into the embedded ASR engine. Very short words or rules with many * can
trigger whatever we say.</p>
<hr class="docutils" />
</div>
<div class="section" id="nopick">
<span id="nopick-function"></span><h3>^noPick<a class="headerlink" href="#nopick" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ^noPick ()
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Prevents the topic from getting randomly the <a class="reference internal" href="dialog.html#dialog-doc-focus"><span>Focus</span></a>.</p>
<p>The <strong>Topic</strong> can still get the focus when a rule matches, but the
<strong>Dialog engine</strong> cannot decide by itself to give the focus.</p>
<hr class="docutils" />
</div>
<div class="section" id="nostay">
<span id="nostay-function"></span><h3>^noStay<a class="headerlink" href="#nostay" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ^noStay ()
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Prevents the topic from keeping the <a class="reference internal" href="dialog.html#dialog-doc-focus"><span>Focus</span></a>.</p>
<p>If a rule matches in the topic, the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> is executed,
but the <a class="reference internal" href="dialog.html#dialog-doc-focus"><span>Focus</span></a> stays on the previous topic.</p>
<hr class="docutils" />
</div>
<div class="section" id="preprocess">
<span id="preprocess-function"></span><h3>^preProcess<a class="headerlink" href="#preprocess" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>topic: ~introduction ^preProcess ()
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Allows a double topic match if another rule has already matched.</p>
<p><strong>Example</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>topic: ~topic1()
language: enu

u:(hello) hello.
</pre></div>
</div>
<div class="highlight-ini"><div class="highlight"><pre>topic: ~topic2 ^preProcess()
language: enu

u:(e:FrontTactilTouched) you touched me.
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-ini"><div class="highlight"><pre>&gt; hello (while touching head FrontTactilTouched)
you touched me. Hello
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="resetonfocus">
<span id="resetonfocus-function"></span><h3>^resetOnFocus<a class="headerlink" href="#resetonfocus" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ^resetOnFocus ()
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>By default a proposal can be said only once.</p>
<p><strong>^resetOnFocus</strong> reactivates all proposals of a <strong>Topic</strong> when:</p>
<ul class="simple">
<li>the topic gets the <a class="reference internal" href="dialog.html#dialog-doc-focus"><span>Focus</span></a> and</li>
<li>all his proposals has been previously deactivated.</li>
</ul>
<hr class="docutils" />
</div>
<div class="section" id="fallback">
<span id="fallback-property"></span><h3>^fallback<a class="headerlink" href="#fallback" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ^fallback ()
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Give the lowest priority to the rules contained in this topic.</p>
<p>Its rules will be taken in consideration after the rules of:</p>
<ol class="arabic simple">
<li>the main section of the Topic having the focus,</li>
<li>the main section of all Topics - ^fallback excepted,</li>
<li>the recover sections of all topics.</li>
</ol>
<hr class="docutils" />
</div>
<div class="section" id="topictag">
<span id="topictag-function"></span><h3>^topicTag<a class="headerlink" href="#topictag" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>^topicTag(topic,tag)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Allows going in a specific location in a topic, defined by a <a class="reference internal" href="#tag"><span>tag</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~topic1()
<span class="ow">language</span>: enu

<span class="ow">proposal</span>: %test test
</pre></div>
</div>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~topic2()
<span class="ow">language</span>: enu

<span class="o">u:</span><span class="nv">(test)</span> ^topicTag(topic1,test)
</pre></div>
</div>
<p><strong>Related functions</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#activate-function"><span>^activate ^deactivate</span></a>,</li>
<li><a class="reference internal" href="#goto-function"><span>^goto</span></a>,</li>
<li><a class="reference internal" href="#gotorandom-function"><span>^gotoRandom</span></a>,</li>
<li><a class="reference internal" href="#gotoreactivate-function"><span>^gotoReactivate</span></a>,</li>
<li><a class="reference internal" href="#tag"><span>Tag: %</span></a>.</li>
</ul>
<hr class="docutils" />
</div>
</div>
<div class="section" id="transformation-rules">
<span id="transformation-rule"></span><h2>Transformation rules<a class="headerlink" href="#transformation-rules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="skin-s">
<span id="skin-rule"></span><h3>Skin: s:<a class="headerlink" href="#skin-s" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>s:(Answer) Modifications
s:(Answer)
Modifications
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>Answer</em> is the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> we want to match to apply this skin</li>
<li><em>Modifications</em> the modifications <a class="reference internal" href="#skin-addword"><span>^addword</span></a> or/and <a class="reference internal" href="#skin-replace"><span>^replace</span></a>
we want to apply to the answer</li>
</ul>
<p><strong>Usage</strong></p>
<p>When a <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> matches a skin the robot says the <em>Answer</em> after
<em>Modifications</em> are applied.</p>
<hr class="docutils" />
</div>
<div class="section" id="addword">
<span id="skin-addword"></span><h3>^addword<a class="headerlink" href="#addword" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>s:(Answer) ^addword(Expression, Position, Frequency)
</pre></div>
</div>
<p>Where:</p>
<ul>
<li><p class="first"><em>Answer</em> is the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> to be matched</p>
</li>
<li><p class="first"><em>Expression</em> can be any string (word(s), concept...)</p>
</li>
<li><p class="first"><em>Position</em> is the position where you want to add the expression in the sentence.</p>
<p>This parameter can be:</p>
<ul class="simple">
<li>an integer: for instance &#8220;2&#8221; if you want to put the <em>Expression</em> in the second position</li>
<li>&#8220;end&#8221; if you want the <em>Expression</em> to be added at the end of the sentence</li>
<li>&#8220;start&#8221; if you want the <em>Expression</em> to be added at the beginning of the sentence</li>
</ul>
</li>
<li><p class="first"><em>Frequency</em> represents the probability of the skin to be applied (1:always apply, 0:never apply)</p>
</li>
</ul>
<p><strong>Usage</strong></p>
<p>Add an <em>Expression</em> in each <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> matching the skin.</p>
<p><strong>Conditions</strong></p>
<p>The rule must be active.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello)</span> hello human
<span class="o">u:</span><span class="nv">(how are you)</span> I am fine

s:(hello human) ^addword(I am your father, end, 1)
s:(*) ^addword(hey, start, 1)
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hello
hey hello human I am your father
&gt; how are you
hey I am fine and you
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="replace">
<span id="skin-replace"></span><h3>^replace<a class="headerlink" href="#replace" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>s:(Answer) ^replace(Expression1, Expression2, Frequency)
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><em>Answer</em> is the <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> to be matched</li>
<li><em>Expression1</em> can be any string (word(s), concept...) you want to replace</li>
<li><em>Expression2</em> can be any string (word(s), concept...) you want to put instead of <em>Expression1</em></li>
<li><em>Frequency</em> is the probability of the skin to be applied (1:always, 0:never)</li>
</ul>
<p><strong>Usage</strong></p>
<p>Replaces <em>Expression1</em> with <em>Expression2</em> in each <a class="reference internal" href="dialog.html#robot-output"><span>Robot output</span></a> matching the skin.</p>
<p><strong>Conditions</strong></p>
<p>The rule must be active.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~introduction ()
<span class="ow">language</span>:enu

<span class="o">u:</span><span class="nv">(hello)</span> hello human
<span class="o">u:</span><span class="nv">(what do you like to do)</span> I like to speak with you human
<span class="o">u:</span><span class="nv">(do you want to play)</span> yes human we can play together

s:({*} human {*}) ^replace(human, Michael, 1)
s:({*} speak {*}) ^replace(speak, play, 1)
</pre></div>
</div>
<p>If you are not familiar with {*} check: <a class="reference internal" href="#wildcard"><span>Wildcard: *</span></a> to under <a class="reference internal" href="#optional-delimiter"><span>Optional part: { }</span></a>.</p>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; hello human
hello Michael
&gt; what do you like to do
I like to play with you Michael
&gt; do you want to play
yes Michael we can play together
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="defined-function">
<span id="use-defined-functions"></span><h3>^defined_function<a class="headerlink" href="#defined-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Syntax</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>^defined_function($parameter1, $parameter2, ..)
</pre></div>
</div>
<p><strong>Usage</strong></p>
<p>Allows you to use a function previously defined with <a class="reference internal" href="#dialog-define-functions"><span>def</span></a>.</p>
<p><strong>Example</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre><span class="ow">topic</span>: ~test()
<span class="ow">language</span>: enu

def:greets($age) ^first[&quot;$age &gt; 18 Mister&quot; &quot;kid&quot;]

<span class="o">u:</span><span class="nv">(I am _* years old)</span> Hello ^greets($1)
</pre></div>
</div>
<p><strong>Execution</strong></p>
<div class="highlight-QiChat"><div class="highlight"><pre>&gt; I am 20 years old
Hello Mister
&gt; I am 10 years old
Hello kid
</pre></div>
</div>
</div>
</div>
<div class="section" id="qichat-events">
<span id="id8"></span><h2>qiChat events<a class="headerlink" href="#qichat-events" title="Permalink to this headline">¶</a></h2>
<p>qiChat events cannot be used with ALMemory. They are only usable in a qiChat <a class="reference internal" href="#event-rule"><span>event</span></a>.</p>
<dl class="event">
<dt id="Dialog/Failure">
<div class="line">Event: <code class="descname">&quot;Dialog/Failure&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/Failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when 3 Dialog/Fallback or 3 Dialog/NotUnderstood have been raised consecutively or a mix.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/Fallback">
<div class="line">Event: <code class="descname">&quot;Dialog/Fallback&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/Fallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a qichat fallback rule matches.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/SameRule">
<div class="line">Event: <code class="descname">&quot;Dialog/SameRule&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/SameRule" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a rule is triggered twice in a row. Allows you to avoid repetitions.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NoOneSpeak5">
<div class="line">Event: <code class="descname">&quot;Dialog/NoOneSpeak5&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NoOneSpeak5" title="Permalink to this definition">¶</a></dt>
<dd><p>Nobody (neither the robot nor the human) has spoken for 5 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NoOneSpeak10">
<div class="line">Event: <code class="descname">&quot;Dialog/NoOneSpeak10&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NoOneSpeak10" title="Permalink to this definition">¶</a></dt>
<dd><p>Nobody (neither the robot nor the human) has spoken for 10 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NoOneSpeak15">
<div class="line">Event: <code class="descname">&quot;Dialog/NoOneSpeak15&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NoOneSpeak15" title="Permalink to this definition">¶</a></dt>
<dd><p>Nobody (neither the robot nor the human) has spoken for 15 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NoOneSpeak20">
<div class="line">Event: <code class="descname">&quot;Dialog/NoOneSpeak20&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NoOneSpeak20" title="Permalink to this definition">¶</a></dt>
<dd><p>Nobody (neither the robot nor the human) has spoken for 20 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NoOneSpeak">
<div class="line">Event: <code class="descname">&quot;Dialog/NoOneSpeak&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NoOneSpeak" title="Permalink to this definition">¶</a></dt>
<dd><p>Nobody (neither the robot nor the human) has spoken for the number of seconds
that the event contains.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NotSpeaking5">
<div class="line">Event: <code class="descname">&quot;Dialog/NotSpeaking5&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NotSpeaking5" title="Permalink to this definition">¶</a></dt>
<dd><p>Human hasn&#8217;t said anything for 5 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NotSpeaking10">
<div class="line">Event: <code class="descname">&quot;Dialog/NotSpeaking10&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NotSpeaking10" title="Permalink to this definition">¶</a></dt>
<dd><p>Human hasn&#8217;t said anything for 10 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
<p><strong>Example</strong></p>
<div class="highlight-qichat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(e:Dialog/NotSpeaking10)</span> are you still there?
</pre></div>
</div>
</dd></dl>

<dl class="event">
<dt id="Dialog/NotSpeaking15">
<div class="line">Event: <code class="descname">&quot;Dialog/NotSpeaking15&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NotSpeaking15" title="Permalink to this definition">¶</a></dt>
<dd><p>Human hasn&#8217;t said anything for 15 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NotSpeaking20">
<div class="line">Event: <code class="descname">&quot;Dialog/NotSpeaking20&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NotSpeaking20" title="Permalink to this definition">¶</a></dt>
<dd><p>Human hasn&#8217;t said anything for 20 seconds.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NotUnderstood">
<div class="line">Event: <code class="descname">&quot;Dialog/NotUnderstood&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NotUnderstood" title="Permalink to this definition">¶</a></dt>
<dd><p>Not raised by the system but matchable event. Occurs when the robot hears some
human input but no rule matches.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
<p><strong>Example</strong></p>
<div class="highlight-qichat"><div class="highlight"><pre><span class="o">u:</span><span class="nv">(e:Dialog/NotUnderstood)</span> sorry, I didn&#39;t understand.
</pre></div>
</div>
</dd></dl>

<dl class="event">
<dt id="Dialog/NotUnderstood2">
<div class="line">Event: <code class="descname">&quot;Dialog/NotUnderstood2&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NotUnderstood2" title="Permalink to this definition">¶</a></dt>
<dd><p>Not raised by the system but matchable event. Occurs when the robot didn&#8217;t
understand 2 or more chains in a row.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NotUnderstood3">
<div class="line">Event: <code class="descname">&quot;Dialog/NotUnderstood3&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NotUnderstood3" title="Permalink to this definition">¶</a></dt>
<dd><p>Not raised by the system but matchable event. Occurs when the robot didn&#8217;t
understand 3 or more chains in a row.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/SpeakFailure">
<div class="line">Event: <code class="descname">&quot;Dialog/SpeakFailure&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/SpeakFailure" title="Permalink to this definition">¶</a></dt>
<dd><p>Not raised by the system but matchable event. Occurs when a rule matches but
the answer is empty (contains an empty variable / concept, a deactivated tag...).
Then the robot won&#8217;t talk.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

<dl class="event">
<dt id="Dialog/NothingToSay">
<div class="line">Event: <code class="descname">&quot;Dialog/NothingToSay&quot;</code></div>
callback<span class="sig-paren">(</span><a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> eventName</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> value</em>, <a class="reference internal" href="../../stdtypes.html#ss" title="std::string">std::string</a><em> subscriberIdentifier</em><span class="sig-paren">)</span><a class="headerlink" href="#Dialog/NothingToSay" title="Permalink to this definition">¶</a></dt>
<dd><p>Not raised by the system but matchable event. Occurs when ^topicRandom didn&#8217;t find any proposal to say.</p>
<p>This event is only usable in qichat rules, not with ALMemory.</p>
</dd></dl>

</div>
</div>


              </div>
            </div>
          </div>
          
            
              <div class="yui-b" id="sidebar">
                
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contents.html">Site map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../news/index.html">What’s new</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index_dev_guide.html">NAOqi - Developer guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/creating_applications/index.html">Creating an application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ref/life/index.html">Programming for a living robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/index_tuto.html">Other tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../software/choregraphe/index.html">Choregraphe Suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev/programming_index.html">SDKs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">NAOqi APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../core/index.html">NAOqi Core</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index_interaction.html">NAOqi Interaction engines</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../autonomouslife.html">ALAutonomousLife</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autonomousabilities/alautonomousblinking.html">ALAutonomousBlinking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autonomousabilities/albackgroundmovement.html">ALBackgroundMovement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autonomousabilities/albasicawareness.html">ALBasicAwareness</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autonomousabilities/allisteningmovement.html">ALListeningMovement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../autonomousabilities/alspeakingmovement.html">ALSpeakingMovement</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="aldialog.html">ALDialog</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="aldialog-api.html">ALDialog API</a></li>
<li class="toctree-l5 current"><a class="reference internal" href="aldialog_syntax_toc.html">QiChat - Table of Content</a><ul class="current">
<li class="toctree-l6"><a class="reference internal" href="dialog.html">QiChat - Introduction</a></li>
<li class="toctree-l6 current"><a class="current reference internal" href="">QiChat - Syntax</a><ul class="simple">
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="aldialog_syntax_overview.html">QiChat - Overview</a></li>
<li class="toctree-l6"><a class="reference internal" href="aldialog_syntax_cheat_sheet.html">QiChat - Cheat sheet</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="aldialog_tuto.html">ALDialog Tutorials</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="lexicon.html">Dialog Lexicon</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../motion/index.html">NAOqi Motion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../audio/index.html">NAOqi Audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vision/index.html">NAOqi Vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../peopleperception/index.html">NAOqi People Perception</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sensors/index.html">NAOqi Sensors &amp; LEDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sensors/dcm.html">DCM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../stdtypes.html">Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev/libqi/index.html">qi Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ref/index.html">Former NAOqi Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../simulators/simulator_index.html">Simulators</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../home_nao.html"><strong>NAO</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../home_pepper.html"><strong>Pepper</strong> - Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../home_romeo.html"><strong>Romeo</strong> - Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../legal/notice.html">Legal notices</a></li>
</ul>

    <div id="on-this-page" style="display:none;">
        <h2 id="otp-link">On this page</h2>
        <div id="toc-list">
            <ul>
<li><a class="reference internal" href="#">QiChat - Syntax</a><ul>
<li><a class="reference internal" href="#header-keywords">Header keywords</a><ul>
<li><a class="reference internal" href="#concept">concept</a></li>
<li><a class="reference internal" href="#dynamic">dynamic</a></li>
<li><a class="reference internal" href="#include">include</a></li>
<li><a class="reference internal" href="#description">description</a></li>
<li><a class="reference internal" href="#overload">overload</a></li>
<li><a class="reference internal" href="#pronunciation">pronunciation</a></li>
<li><a class="reference internal" href="#language">language</a></li>
<li><a class="reference internal" href="#topic">topic</a></li>
<li><a class="reference internal" href="#def">def</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rules">Rules</a><ul>
<li><a class="reference internal" href="#user-rule">User rule</a></li>
<li><a class="reference internal" href="#user-subrule">User subrule</a></li>
<li><a class="reference internal" href="#proposal">Proposal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#delimiters">Delimiters</a><ul>
<li><a class="reference internal" href="#choice">Choice: [ ]</a></li>
<li><a class="reference internal" href="#phrase-delimiter">Phrase delimiter: &#8221; &#8220;</a></li>
<li><a class="reference internal" href="#optional-part">Optional part: { }</a></li>
</ul>
</li>
<li><a class="reference internal" href="#special-characters">Special characters</a><ul>
<li><a class="reference internal" href="#comments">Comments:&nbsp;#</a></li>
<li><a class="reference internal" href="#wildcard">Wildcard: *</a></li>
<li><a class="reference internal" href="#forbidden-word">Forbidden word: !</a></li>
<li><a class="reference internal" href="#tag">Tag: %</a></li>
<li><a class="reference internal" href="#input-storing">Input storing: _</a></li>
<li><a class="reference internal" href="#variable">Variable: $</a></li>
<li><a class="reference internal" href="#conditions">Conditions: == &gt; &lt;&gt; &lt;</a></li>
<li><a class="reference internal" href="#robot-events-e-eventname">Robot events: e:eventName</a></li>
<li><a class="reference internal" href="#concept-call">Concept call: ~</a></li>
</ul>
</li>
<li><a class="reference internal" href="#forbidden-characters">Forbidden characters</a><ul>
<li><a class="reference internal" href="#forbidden-characters-in-human-input">Forbidden characters in Human input</a></li>
<li><a class="reference internal" href="#forbidden-characters-in-robot-output">Forbidden characters in Robot output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rule-functions-and-properties">Rule functions and properties</a><ul>
<li><a class="reference internal" href="#activate-deactivate">^activate ^deactivate</a></li>
<li><a class="reference internal" href="#break">^break</a></li>
<li><a class="reference internal" href="#clear">^clear</a></li>
<li><a class="reference internal" href="#empty">^empty</a></li>
<li><a class="reference internal" href="#enumerate">^enumerate</a></li>
<li><a class="reference internal" href="#exist-notexist">^exist ^notExist</a></li>
<li><a class="reference internal" href="#first">^first</a></li>
<li><a class="reference internal" href="#goto">^goto</a></li>
<li><a class="reference internal" href="#gotorandom">^gotoRandom</a></li>
<li><a class="reference internal" href="#gotoreactivate">^gotoReactivate</a></li>
<li><a class="reference internal" href="#topictagreactivate">^topicTagReactivate</a></li>
<li><a class="reference internal" href="#topicrandom">^topicRandom</a></li>
<li><a class="reference internal" href="#nextproposal">^nextProposal</a></li>
<li><a class="reference internal" href="#play">^play</a></li>
<li><a class="reference internal" href="#previousproposal">^previousProposal</a></li>
<li><a class="reference internal" href="#private">^private</a></li>
<li><a class="reference internal" href="#rand">^rand</a></li>
<li><a class="reference internal" href="#repeat">^repeat</a></li>
<li><a class="reference internal" href="#sameproposal">^sameProposal</a></li>
<li><a class="reference internal" href="#size">^size</a></li>
<li><a class="reference internal" href="#stayinscope">^stayInScope</a></li>
</ul>
</li>
<li><a class="reference internal" href="#user-info-methods">User info methods</a><ul>
<li><a class="reference internal" href="#getuserinfo">^getUserInfo</a></li>
<li><a class="reference internal" href="#setuserinfo">^setUserInfo</a></li>
<li><a class="reference internal" href="#hasuserinfo">^hasUserInfo</a></li>
<li><a class="reference internal" href="#removeuserinfo">^removeUserInfo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#call-functions-and-program-logic">Call functions and program logic</a><ul>
<li><a class="reference internal" href="#script">%script</a></li>
<li><a class="reference internal" href="#switchfocus">^switchFocus</a></li>
<li><a class="reference internal" href="#call">^call</a></li>
<li><a class="reference internal" href="#scall">^sCall</a></li>
<li><a class="reference internal" href="#pcall">^pCall</a></li>
<li><a class="reference internal" href="#mode">^mode</a></li>
<li><a class="reference internal" href="#run">^run</a></li>
<li><a class="reference internal" href="#runtag">^runTag</a></li>
<li><a class="reference internal" href="#runsound">^runSound</a></li>
<li><a class="reference internal" href="#start">^start</a></li>
<li><a class="reference internal" href="#starttag">^startTag</a></li>
<li><a class="reference internal" href="#startsound">^startSound</a></li>
<li><a class="reference internal" href="#stop">^stop</a></li>
<li><a class="reference internal" href="#stoptag">^stopTag</a></li>
<li><a class="reference internal" href="#stopsound">^stopSound</a></li>
<li><a class="reference internal" href="#wait">^wait</a></li>
<li><a class="reference internal" href="#waittag">^waitTag</a></li>
<li><a class="reference internal" href="#waitsound">^waitSound</a></li>
</ul>
</li>
<li><a class="reference internal" href="#topic-properties">Topic properties</a><ul>
<li><a class="reference internal" href="#notinembeddedasr">^notInEmbeddedASR</a></li>
<li><a class="reference internal" href="#nopick">^noPick</a></li>
<li><a class="reference internal" href="#nostay">^noStay</a></li>
<li><a class="reference internal" href="#preprocess">^preProcess</a></li>
<li><a class="reference internal" href="#resetonfocus">^resetOnFocus</a></li>
<li><a class="reference internal" href="#fallback">^fallback</a></li>
<li><a class="reference internal" href="#topictag">^topicTag</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transformation-rules">Transformation rules</a><ul>
<li><a class="reference internal" href="#skin-s">Skin: s:</a></li>
<li><a class="reference internal" href="#addword">^addword</a></li>
<li><a class="reference internal" href="#replace">^replace</a></li>
<li><a class="reference internal" href="#defined-function">^defined_function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qichat-events">qiChat events</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
        </div>
      </div>
              </div>
            
          
        </div>
    </main>
    <a href="#0" class="cd-top"></a>
    <div id="ft">
      
      <a title="Glossary" href="../../../glossary.html">Glossary</a>
      <a title="Site map" href="../../../contents.html">Site map</a>
      <a title="Index" href="../../../genindex.html">Index</a>
      <a title="Support" target="_blank" href="https://account.aldebaran.com/support/">Support</a>
      <a title="Contact" target="_blank" href="https://www.aldebaran.com/en/contact">Contact</a>
      <a title="Legal Notices" href="../../../legal/notice.html">Legal Notices</a>
      
      
      <img src="https://www.ald.softbankrobotics.com/sites/aldebaran/files/logos-picture/2016_digital_logo_sbr_112x31_0.png" alt="">
    </div>
  </div>

      <div class="clearer"></div>
    </div>
  </body>
</html>